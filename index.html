<!DOCTYPE html>
<html lang="en">

<head>
    <!-- 
        作者：ICAN
        开始时间：20231006
        结束时间：20231006
     -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICAN选择器</title>
    <!-- 旋转数组 -->
    <script>
        /**
         * 旋转数组 升索引(顺时针) 或者 降索引(逆时针)
         * 
         * create:  2023.7.30 15:17
         * author:  ican
         * funName: isIntegerStrict(number)
         * args:    arr1In           传入需要旋转的数组
         *          howmanyIndex    需要升/降多少索引
         *          isUp            是否升序，true是升序(顺时针)，false是降序(逆时针)，不写则取false
         * return:  Array           返回旋转后的数组
         * version: v1.0
         */
        function rotateArr(arr1In, howmanyIndex, isUp) {
            if (!Array.isArray(arr1In)) {
                return false;
            }

            // 判断数字是不是整数
            if (!Number.isInteger(howmanyIndex)) {
                return false;
            }

            if (howmanyIndex < 0) {
                return false;
            }

            // 如果 howmanyIndex > arr1In.length，howmanyIndex应该取多少？
            // [1,2]      长度为2，降3次，相当于降1次  [2,1] [1,2] [2,1]
            // [1,2,3,4]  长度为4，降4次，相当于没降   [2,3,4,1] [3,4,1,2] [4,1,2,3] [1,2,3,4]
            // number % 0 = NaN
            if (howmanyIndex % arr1In.length === 0 || arr1In.length === 0) {
                return arr1In;
            } else {
                howmanyIndex = howmanyIndex % arr1In.length;
            }

            // 使用者可能不对当前数组降索引，所以要创建结果数组
            let arr1Out = [];

            if (isUp) {
                // 数组前面的部分进行升序，排到后面
                // 假设：
                // howmanyIndex = 2  1  3
                // [1,2,3,4,5]  [1,2,3,4,5]   [1,2,3,4,5]
                // [4,5,1,2,3]  [5,1,2,3,4]   [3,4,5,1,2]
                // [,,1,2,3]    [,1,2,3,4]    [,,,1,2]
                for (let i = howmanyIndex, j = 0; i < arr1In.length; i++, j++) {
                    // 2 = 0  1 = 0  3 = 0
                    // 3 = 1  2 = 1  4 = 0
                    // 4 = 2  3 = 2
                    //        4 = 3
                    arr1Out[i] = arr1In[j];
                }

                // 数组后面的部分进行降序，排到前面
                // 假设：
                // howmanyIndex = 2  1  4
                // [1,2,3,4,5]  [1,2,3,4,5]  [1,2,3,4,5]
                // [4,5,1,2,3]  [5,1,2,3,4]  [2,3,4,5,1]
                // [4,5,,,]     [5,,,,]      [2,3,4,5,]
                for (let i = 0; i < howmanyIndex; i++) {
                    // 0 = 3  0 = 4  0 = 1
                    // 1 = 4         1 = 2
                    //               2 = 3
                    //               3 = 4
                    arr1Out[i] = arr1In[arr1In.length - howmanyIndex + i];
                }
            } else {
                // 数组前面的部分进行升序，排到后面
                // 假设：
                // howmanyIndex = 2  1
                // [1,2,3,4,5]  [1,2,3,4,5]
                // [3,4,5,1,2]  [2,3,4,5,1]
                // [,,,1,2]     [,,,,1]
                for (let i = arr1In.length - howmanyIndex, j = 0; i < arr1In.length; i++, j++) {
                    // 3 = 0  4 = 0
                    // 4 = 1
                    arr1Out[i] = arr1In[j];
                }

                // 数组后面的部分进行降序，排到前面
                // 假设：
                // howmanyIndex = 2  1
                // [1,2,3,4,5]  [1,2,3,4,5]
                // [3,4,5,1,2]  [2,3,4,5,1]
                // [3,4,5,,]    [2,3,4,5,]
                for (let i = 0; i < arr1In.length - howmanyIndex; i++) {
                    // 0 = 2  0 = 1
                    // 1 = 3  1 = 2
                    // 2 = 4  2 = 3
                    //        3 = 4
                    arr1Out[i] = arr1In[i + howmanyIndex];
                }
            }

            // 返回结果数组
            return arr1Out;
        }
    </script>
    <!-- 生成范围内的乱序数组、生成随机数、判断正整数、判断整数 -->
    <script>
        // 生成所有 [min, max] 之间的数值组成一个数组并返回
        function randomNumberToArr(min, max) {
            let arr1 = []
            for (let i = 0; i < max - min + 1; i++) {
                let n = getRandomNumber(min, max)
                while (arr1.indexOf(n) >= 0) {
                    // console.log('-------------------')
                    n = getRandomNumber(min, max)
                }
                arr1[i] = n
            }
            return arr1
        }

        /**
         * 生成一定范围内的随机整数，左右都包含
         * 
         * create:  2023.7.30 16:03
         * author:  ican
         * funName: randomNumber(min, max)
         * args:    min             范围的最小值
         *          max             范围的最大值
         * return:  number          返回生成的随机整数
         * version: v1.0
         */
        function getRandomNumber(min, max) {
            if (min > max) {
                return false;
            }
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        /**
         * 判断输入的字符串是否为正整数
         * 
         * create:  2023.7.30 14:28
         * author:  ican
         * funName: isIntegerStringPositive(str)
         * args:    str             String字符串类型
         * return:  Boolean         true/false
         * version: v1.0
         */
        function isIntegerStringPositive(str) {
            if (isNaN(Number(str))) {
                return false;
            }
            if (str === 'null' || str === null) {
                return false;
            }
            if (typeof parseInt(str) !== 'number') {
                return false;
            }
            if (str.trim() === '' || str.indexOf('.') > -1) {
                return false;
            }
            return true;
        }

        /**
         * 判断所以类型是否为整数【严格模式】
         * 
         * create:  2023.7.30 13:30
         * author:  ican
         * funName: isIntegerStrict(number)
         * args:    number          Integer整数类型
         * return:  Boolean         true/false
         * version: v1.0
         */
        function isIntegerAllStrict(number) {
            if (Number.isInteger) {
                return Number.isInteger(number);
            } else {
                return typeof number === 'number' && number % 1 === 0;
            }
        }
    </script>

    <style>
        /*
            设置盒子的滚动条样式
        */
        .content_box::-webkit-scrollbar {
            /*滚动条整体样式*/
            width: 9px;
            /*高宽分别对应横竖滚动条的尺寸*/
            height: 1px;
        }

        .content_box::-webkit-scrollbar-thumb {
            border: 0;
            /*滚动条里面小方块*/
            border-radius: 9px;
            /* background-color: skyblue; */
            background-color: rgba(46, 139, 134, 0.7);
            background-color: #225fc1;
            background-image: -webkit-linear-gradient(45deg,
                    rgba(255, 255, 255, 0.2) 25%,
                    transparent 25%,
                    transparent 50%,
                    rgba(255, 255, 255, 0.2) 50%,
                    rgba(255, 255, 255, 0.2) 75%,
                    transparent 75%,
                    transparent);
        }

        .content_box::-webkit-scrollbar-track {
            /*滚动条里面轨道*/
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
            background: #ededed80;
            border-radius: 9px;
        }

        .content_box2::-webkit-scrollbar {
            /*滚动条整体样式*/
            width: 6px;
            /*高宽分别对应横竖滚动条的尺寸*/
            height: 1px;
        }

        .content_box2::-webkit-scrollbar-thumb {
            border: 0;
            /*滚动条里面小方块*/
            border-radius: 6px;
            /* background-color: skyblue; */
            background-color: rgba(46, 139, 134, 0.7);
            background-color: #225fc1;
            background-image: -webkit-linear-gradient(45deg,
                    rgba(255, 255, 255, 0.2) 25%,
                    transparent 25%,
                    transparent 50%,
                    rgba(255, 255, 255, 0.2) 50%,
                    rgba(255, 255, 255, 0.2) 75%,
                    transparent 75%,
                    transparent);
        }

        .content_box2::-webkit-scrollbar-track {
            /*滚动条里面轨道*/
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
            background: #ededed80;
            border-radius: 6px;
        }

        * {
            margin: 0;
            padding: 0;
        }

        body {
            cursor: default;
        }

        li {
            position: relative;
            list-style: none;
            text-align: center;
        }

        div {
            box-sizing: border-box;
        }

        li button {
            position: absolute;
            right: 50%;
            top: 10px;
            transform: translate(159px);
            width: 52px;
            height: 26px;
            background-color: pink;
            background-color: #111;
            background-color: #EA4335;
            border: 0;
            font-size: 16px;
            border-radius: 6px;
            /* font-weight: 700; */
            color: #222;
            color: #fff;
            line-height: 24px;
            /* letter-spacing: 2px; */
            transition: all .2s;
        }

        li button:hover {
            background-color: #cd3325;
        }

        li button:active {
            background-color: #cd3325;
        }

        input {
            outline: none;
            font-size: 17px;
            /* padding: 0px 6px; */
            height: 24px;
            line-height: 24px;
            width: 324px;
            width: 290px;
            text-align: center;
            transition: all .2s;
            border-radius: 6px;
            border: 2px solid pink;
            border: 2px solid #111;
            margin: 6px 0;
        }

        .question input {
            border: 2px solid #EA4335;
            border: 2px solid #33A351;
        }

        li input {
            border: 2px solid #EA4335;
            width: 68px;
        }

        .main-content {
            width: 96%;
            margin: 10px auto;
            /* background-color: pink; */
        }

        .top-line {
            width: 100%;
            height: 2px;
            background-color: pink;
            background-color: #111;
            background-color: #3679e3;
            margin: 0 0 10px;
            /* animation: btnChange 6s linear infinite; */
        }

        .main-content h1 {
            /* color: deeppink; */
            text-align: center;
            margin: 6px 0;
        }

        .main-content h3 {
            /* color: deeppink; */
            text-align: center;
            margin: 10px 0 3px;
            font-size: 20px;
            letter-spacing: 2px;
            font-weight: 400;
        }

        .question,
        .question2 {
            text-align: center;
        }

        .btn-add,
        .btn-choose,
        .btn-clear {
            text-align: center;
        }

        .btn-add button,
        .btn-choose button,
        .btn-clear button,
        .btn-add2 button {
            font-size: 17px;
            width: 100px;
            /* word-spacing: 3px; */
            text-align: center;
            height: 30px;
            line-height: 25px;
            background-color: pink;
            background-color: #111;
            background-color: #3679e3;
            border: none;
            /* font-weight: 700; */
            color: #222;
            color: #fff;
            letter-spacing: 2px;
        }

        .btn-add button,
        .btn-clear button,
        .btn-add2 button {
            border-radius: 6px;
        }

        .btn-clear button {
            background-color: #3679e3;
            height: 24px;
            font-size: 16px;
            line-height: 24px;
            margin-top: 6px !important;
        }

        .btn-clear button:hover {
            background-color: #266bd9;
        }

        .btn-clear button:active {
            background-color: #266bd9;
        }

        .btn-add button,
        .btn-add2 button {
            background-color: #f94444;
            height: 24px;
            font-size: 16px;
            width: 60px;
            margin-bottom: 6px;
        }

        .btn-add button:hover,
        .btn-add2 button:hover {
            background-color: #eb3131;
        }

        .btn-add button:active,
        .btn-add button:active {
            background-color: #eb3131;
        }

        .btn-choose button {
            width: 60px;
            height: 36px;
            border-radius: 10px;
            margin: 9px 0 0;
            font-size: 24px;
            /* animation: btnChange 6s linear infinite; */
            transition: all .2s;
            background-color: #4183ec;
            /* color: #000; */
            font-weight: 700;
        }

        .btn-choose button:hover {
            /* animation-play-state: paused; */
            background-color: #3576df;
        }

        .btn-choose button:active {
            background-color: #266bd9;
        }

        .tianshi {
            /* width: 326px; */
            width: 100%;
            height: 210px;
            /* background-color: skyblue; */
            margin: 10px auto 0;
            border-radius: 6px;
            padding: 6px;
            text-align: center;
            border: 2px solid pink;
            border: 2px solid #111;
            border: 1px solid #3679e3;
            overflow: auto;
        }

        .tianshi dt {
            font-weight: 700;
            /* background-color: pink; */
            /* background-color: #111; */
            /* background-color: #3c80ee; */
            color: #2162ca;
            padding: 3px 0 4px;
            /* color: #fff; */
            /* border-radius: 3px; */
        }

        .tianshi dd {
            margin: 3px 3px;
            display: inline-block;
            background-color: #bbd5ff;
            width: 72px;
            height: 24px;
            line-height: 24px;
            text-align: center;
        }

        .tianshi dl:nth-child(n+2) {
            /* border-top: 1px solid #111; */
            margin-top: 6px;
        }

        @media screen and (max-width:352px) {
            body {
                width: 342px;
            }
        }

        .blue {
            color: #3679e3;
        }

        .red {
            color: #f94444;
        }

        .orange {
            color: #FBBC05;
            color: #f5b800;
            /* color: #903ff4; */
            /* color: deeppink; */
        }

        .green {
            color: #32b054;
        }

        @keyframes btnChange {
            0% {
                background-color: #e13f30;
            }

            33% {
                background-color: #2162ca;
            }

            66% {
                background-color: #33A351;
            }

            100% {
                background-color: #e13f30;
            }
        }

        .today input {
            border: none;
            border-bottom: 1px solid #3679e3;
            width: 24px;
            border-radius: 0px;
            background-color: #fff;
            height: 20px;
            margin: 3px 0;
            font-size: 16px;
        }

        .today .maxlength-four {
            width: 40px;
        }

        .today button {
            width: 120px;
            height: 24px;
            background-color: #f94444;
            border: none;
            border-radius: 6px;
            color: #FFF;
            font-size: 16px;
            transition: all .2s;
            letter-spacing: 2px;
            /* margin-top: 2px; */
            line-height: 24px;
        }

        .today button:hover {
            background-color: #f03636;
        }

        .box-good-number {
            color: #33A351;
            color: #2f6fd6;
            margin: 10px 0 6px;
            font-weight: 700;
        }

        .date,
        .time {
            color: #33A351;
            color: #2a68cb;
        }

        /* .date input,
        .time input {
            border-color: #8133a3;
        } */

        .randoms input {
            border-color: #EA4335;
        }

        .answers,
        .answers2 {
            /* width: 324px; */
            width: 100%;
            margin: auto;
            text-align: center;
        }

        h4 {
            font-weight: 400;
        }

        h3 {
            font-weight: 700 !important;
        }

        ul li {
            display: inline-block;
            width: 72px;
            margin: 3px 3px;
            /* margin: 6px 3px; */
        }

        .question input,
        .question2 input {
            border: none;
            border-bottom: 1px solid #33A351;
            border-radius: 0px;
            font-size: 16px;
        }

        ul li input {
            margin: 0px;
            border: none;
            border-bottom: 1px solid #EA4335;
            border-radius: 0px;
            font-size: 16px;
            padding: 0px;
            width: 72px;
        }

        .container .randomNum {
            height: 18px;
            /* line-height: 30px; */
            padding: 3px;
            background-color: pink;
            background-color: #f94444;
            border: none;
            border-radius: 6px;
            color: #fff;
            /* color: #000; */
            font-size: 16px;
            transition: all .2s;
            letter-spacing: 2px;
            margin-top: 2px;
        }

        .write {
            width: 100%;
        }

        textarea {
            resize: none;
            width: 100%;
            height: 108px;
            margin: 12px auto;
            outline: none;
            font-size: 16px;
            border: 1px solid #225fc1;
            padding: 6px;
            border-radius: 6px;
            box-sizing: border-box;
        }
    </style>
    <link rel="shortcut icon" href="./images/logo.ico">
</head>

<body class="content_box">
    <div class="container">
        <div class="main-content">
            <!-- <h1>天使选择器</h1> -->
            <h1>
                <span class="blue">I</span>
                <span class="red">C</span>
                <span class="green">A</span>
                <span class="orange">N</span>
            </h1>
            <div class="top-line"></div>


            <div class="today">
                <!-- &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&& 幸运数模块 -->
                <h4 style="text-align: center;" class="box-good-number">
                    今日幸运数字 : <span class="goodNumber"></span>
                </h4>
                <script>
                    // 获取需要填入随机数的节点
                    let goodNumber = document.querySelector('.goodNumber');
                    // 自定义随机数的范围为 [1, 35]
                    // 获取 [1, 35] 范围内的乱序数组
                    let goodArr = randomNumberToArr(1, 80);
                    console.log('&&&&&&&&&&&&&&&&&& 随机生成幸运数字');
                    // 打印幸运数组
                    console.log('幸运数组[1-35]：', goodArr);
                    // 随机获取 [0, 34] 之间的一个索引值，用于生成幸运数
                    let goodIndex = getRandomNumber(0, 79);
                    // 打印索引值
                    console.log('索引值：' + goodIndex);
                    // 根据索引获取幸运数
                    console.log('幸运数字：', goodArr[goodIndex]);
                    // 将幸运数字填入页面
                    goodNumber.innerHTML = goodArr[goodIndex] < 10 ? '0' + goodArr[goodIndex] : goodArr[goodIndex];
                    console.log('&&&&&&&&&&&&&&&&&& 随机生成幸运数字');
                </script>

                <!-- &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&& 日期模块：年月日、时分秒 -->
                <h4 style="text-align: center;" class="date">
                    日期 :
                    <input type="text" maxlength="4" class="maxlength-four"> 年
                    <input type="text" maxlength="2"> 月
                    <input type="text" maxlength="2"> 日
                </h4>
                <h4 style="text-align: center;" class="time">
                    时间 :
                    <input type="text" maxlength="2" class="maxlength-four"> 时
                    <input type="text" maxlength="2"> 分
                    <input type="text" maxlength="2"> 秒
                </h4>
                <script>
                    // 获取日期盒子中所有的 input 框
                    let myDateInputs = document.querySelectorAll('.date input');
                    // 获取当前时间
                    let date = new Date();
                    // console.log(date);
                    // 获取年月日
                    let year = date.getFullYear();
                    // console.log(year);
                    let month = date.getMonth() + 1;
                    // console.log(month);
                    let day = date.getDate();
                    // console.log(day);
                    // 将日期盒子中所有的 input 框设为不可用
                    for (let i = 0; i < myDateInputs.length; i++) {
                        myDateInputs[i].disabled = true;
                    }
                    // 将年月日填入日期盒子中对应的 input 框
                    myDateInputs[0].value = year;
                    myDateInputs[1].value = month;
                    myDateInputs[2].value = day;


                    // 获取时间盒子中所有的 input 框
                    let myTimeInputs = document.querySelectorAll('.time input');
                    // 获取时分秒
                    let hours = date.getHours();
                    // console.log(hours);
                    let minutes = date.getMinutes();
                    // console.log(minutes);
                    let seconds = date.getSeconds();
                    // console.log(seconds);
                    // 将时间盒子中所有的 input 框设为不可用
                    for (let i = 0; i < myTimeInputs.length; i++) {
                        myTimeInputs[i].disabled = true;
                    }
                    // 将时分秒填入时间盒子中对应的 input 框
                    myTimeInputs[0].value = hours;
                    myTimeInputs[1].value = minutes;
                    myTimeInputs[2].value = seconds;
                    // 设置定时器
                    let timerForCurrentTime = setInterval(function () {
                        // 每秒都需要重新获取一下时间
                        date = new Date();
                        hours = date.getHours();
                        minutes = date.getMinutes();
                        seconds = date.getSeconds();
                        // 将重新获取的时分秒填入时间盒子中对应的 input 框
                        myTimeInputs[0].value = hours;
                        myTimeInputs[1].value = minutes;
                        myTimeInputs[2].value = seconds;
                    }, 1000);
                </script>

                <!-- &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&& 随机数模块 -->
                <h3 style="color:#f94444">随机数</h3>
                <h4 style="text-align: center;margin-bottom: 20px;color:#ec3a3a" class="randoms">
                    <span style="color:#ec3a3a">范围[-999,999] : </span>
                    <input type="text" class="min" value="1" maxlength="4" style="width: 40px;">
                    —
                    <input type="text" class="max" value="50" maxlength="3" style="width: 40px;">
                    <br>
                    <button class="getRandom" style="width: 60px;">生成</button>
                    ->
                    <input type="text" class="randomNum" value="" style="width: 50px;">
                </h4>
                <script>
                    let getRandom = document.querySelector('.getRandom');
                    let randomNum = document.querySelector('.randomNum');
                    let min = document.querySelector('.min');
                    let max = document.querySelector('.max');
                    randomNum.disabled = true;
                    min.disabled = false;
                    max.disabled = false;

                    min.addEventListener('keydown', function (e) {
                        if (e.key === 'Enter') {
                            max.focus();
                        }
                        if (e.key === 'ArrowLeft') {
                            return false;
                        }
                        if (e.key === 'ArrowRight') {
                            max.focus();
                        }
                    });
                    max.addEventListener('keydown', function (e) {
                        if (e.key === 'Enter') {
                            this.blur();
                            return false;
                        }
                        if (e.key === 'ArrowLeft') {
                            min.focus();
                        }
                        if (e.key === 'ArrowRight') {
                            return false;
                        }
                    });

                    // 点击按钮生成随机数
                    getRandom.addEventListener('click', function () {
                        if (!isIntegerStringPositive(min.value) || !isIntegerStringPositive(max.value)) {
                            alert('请输入正整数');
                            return false;
                        }
                        if (parseInt(min.value) > parseInt(max.value)) {
                            alert('请输入正确的范围');
                            return false;
                        }
                        if (parseInt(max.value) > 999 || parseInt(min.value) < -999) {
                            alert('请输入正确的范围[-999, 999]');
                            return false;
                        }
                        this.disabled = true;
                        min.disabled = true;
                        max.disabled = true;
                        let minNum = parseInt(min.value);
                        let maxNum = parseInt(max.value);
                        let randomArr = randomNumberToArr(minNum, maxNum)

                        let index = getRandomNumber(0, maxNum - minNum)

                        new Promise(function (resolve, reject) {
                            // 自定义结束时间
                            let time = getRandomNumber(10, 20);
                            time *= 50;
                            // console.log(time);
                            let timer = setInterval(function () {
                                index = getRandomNumber(0, maxNum - minNum);
                                // if(randomArr[index] < 10&&randomArr[index]>0){
                                //     randomNum.value =  '0' + randomArr[index]
                                // }else{
                                //     randomNum.value = randomArr[index];
                                // }
                                randomNum.value = randomArr[index];
                                let tt = setTimeout(function () {
                                    clearInterval(timer);
                                    clearTimeout(tt);
                                    resolve(index);
                                }, time);
                            }, 50)
                        }).then(function (v) {
                            console.log('&&&&&&&&&&&& 生成任意范围内的随机数');
                            console.log('随机数[' + minNum + ', ' + maxNum + ']系列：')
                            console.log('随机数数组：', randomArr)
                            console.log('随机数索引：', v);
                            console.log('随机数：', randomArr[v]);
                            getRandom.disabled = false;
                            min.disabled = false;
                            max.disabled = false;
                            console.log('&&&&&&&&&&&& 生成任意范围内的随机数');
                        });
                    })


                    // 进入页面就会生成一个随机数
                    getRandom.click();
                </script>
            </div>



            <div class="xuan1">
                <h3 style="color:#32b054;">选填1</h3>
                <div class="question">
                    <input type="text" name="" id="" value="" maxlength="18" placeholder="限18个字">
                </div>
                <h3 style="color:#f94444;">必填1</h3>
                <div class="answers">
                    <div class="btn-add">
                        <button>添加</button>
                        <button class="qingkong">清空</button>
                    </div>
                    <ul>
                        <li style="margin-right: 0px;">
                            <input type="text" name="" id="" value="" maxlength="4" placeholder="限4个字">
                            <!-- <button>删除</button> -->
                        </li>
                    </ul>
                </div>
                <script>
                    /*
                        增加本地存储功能
                    */
                    // 选填1
                    let xuanInput1 = document.querySelector('.question input');
                    xuanInput1.value = localStorage.getItem('xuan1');
                    xuanInput1.addEventListener('blur', function () {
                        localStorage.setItem('xuan1', this.value);
                    });
                </script>
            </div>


            <div class="xuan2">
                <h3 style="color:#32b054;">选填2</h3>
                <div class="question2">
                    <input type="text" name="" id="" value="" maxlength="18" placeholder="限18个字">
                </div>
                <h3 style="color:#f94444;">必填2</h3>
                <div class="answers2">
                    <div class="btn-add2">
                        <button>添加</button>
                        <button class="qingkong2">清空</button>
                    </div>
                    <ul>
                        <li style="margin-right: 0px;">
                            <input type="text" name="" id="" value="" maxlength="4" placeholder="限4个字">
                            <!-- <button>删除</button> -->
                        </li>
                    </ul>
                </div>
                <script>
                    /*
                        增加本地存储功能
                    */
                    // 选填2
                    let xuanInput2 = document.querySelector('.question2 input');
                    xuanInput2.value = localStorage.getItem('xuan2');
                    xuanInput2.addEventListener('blur', function () {
                        localStorage.setItem('xuan2', this.value);
                    });
                </script>
            </div>



            <!-- <h3 style="color:#3679e3;">天使的建议(优选)</h3> -->
            <div class="btn-choose">
                <button>命1</button>
                <button>命2</button>
            </div>
            <div class="btn-clear">
                <button style="margin-top: 12px;width: 60px;" onclick="location.reload()">重置</button>
                <button style="margin-top: 12px;width: 60px;">清空</button>
            </div>
            <div class="tianshi content_box2">
                <div class="content">
                    <!-- <dl>
                        <dt>吃什么</dt>
                        <dd>水果</dd>
                    </dl>
                    <dl>
                        <dt>吃什么</dt>
                        <dd>水果</dd>
                    </dl> -->
                </div>
            </div>
            <div class="write">
                <h3 class="red">草稿</h3>
                <textarea name="" id="" cols="30" rows="10" class="content_box2"></textarea>
            </div>
            <script>
                /*
                    增加本地存储功能
                */
                // 草稿
                let caogao = document.querySelector('.write textarea');
                caogao.value = localStorage.getItem('caogao') || '';
                caogao.addEventListener('blur', function () {
                    localStorage.setItem('caogao', this.value);
                });
                setInterval(() => {
                    localStorage.setItem('caogao', caogao.value);
                }, 10000);
            </script>
        </div>
    </div>

    <script>
        /*
            让所有的 input 点击后清空内容
        */
        let inputs = document.querySelectorAll('.xuan1 input');
        let inputs2 = document.querySelectorAll('.xuan2 input');
        // for (let i = 0; i < inputs.length; i++) {
        //     inputs[i].addEventListener('click', function () {
        //         this.value = '';
        //     });
        // }


        /*
            点击 添加 按钮，在 "心中的答案" 区域添加一个输入框和一个删除按钮
        */
        // 获取添加按钮
        let addBtn = document.querySelectorAll('.btn-add button')[0];
        let addBtn2 = document.querySelectorAll('.btn-add2 button')[0];
        let qingkong = document.querySelectorAll('.btn-add button')[1];
        let qingkong2 = document.querySelectorAll('.btn-add2 button')[1];
        // 获取 ul
        let ul = document.querySelector('.answers ul');
        let ul2 = document.querySelector('.answers2 ul');
        // 事件处理函数
        let handle = function (e) {
            if (e.key === 'Enter') {
                addBtn.click();
            }
        };
        let handle2 = function (e) {
            if (e.key === 'Enter') {
                addBtn2.click();
            }
        };


        // let handle1 = function (e) {
        //     if (e.key === 'Enter') {
        //         for (let i = 0; i < ul.children.length; i++) {
        //             ul.children[i].children[0].addEventListener('keydown', handle2);
        //         }
        //         ul.children[ul.children.length - 1].children[0].focus();
        //         console.log(ul.children.length);
        //         // 清除其它 input 中的回车事件，给最后一个 input 添加回车事件
        //         for (let i = 0; i < ul.children.length; i++) {
        //             ul.children[i].children[0].removeEventListener('keydown', handle);
        //         }
        //         ul.children[ul.children.length - 1].children[0].addEventListener('keydown', handle2);
        //         // for (let i = 0; i < ul.children.length; i++) {
        //         //     ul.children[i].children[0].addEventListener('keydown', handle);
        //         // }
        //         inputs = document.querySelectorAll('input');
        //         // for (let i = 0; i < inputs.length; i++) {
        //         //     inputs[i].addEventListener('click', function () {
        //         //         this.value = '';
        //         //     });
        //         // }
        //         for (let i = 0; i < ul.children.length; i++) {
        //             ul.children[i].children[0].addEventListener('keydown', handle3);
        //         }
        //     }
        // }

        // let handle2 = function (e) {

        // }

        // let handle3 = function (e) {}

        // 给第一个 input 添加回车事件

        let xuan1arr = JSON.parse(localStorage.getItem('xuan1arr')) || [];
        ul.children[0].children[0].value = xuan1arr.length === 0 ? '' : xuan1arr[0];
        let xuan2arr = JSON.parse(localStorage.getItem('xuan2arr')) || [];
        ul2.children[0].children[0].value = xuan2arr.length === 0 ? '' : xuan2arr[0];

        qingkong.addEventListener('click', function () {
            ul.innerHTML = `
                <li style="margin-right: 0px;">
                    <input type="text" name="" id="" value="" maxlength="4" placeholder="限4个字">
                    <!-- <button>删除</button> -->
                </li>
            `;
            localStorage.removeItem('xuan1arr');
            xuan1arr = [];
            ul.children[0].children[0].addEventListener('keydown', handle);

            ul.children[0].children[0].addEventListener('blur', function () {
                // if (this.value != '') {
                xuan1arr[0] = this.value;
                // }
                localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));
            });
        });

        qingkong2.addEventListener('click', function () {
            ul2.innerHTML = `
                <li style="margin-right: 0px;">
                    <input type="text" name="" id="" value="" maxlength="4" placeholder="限4个字">
                    <!-- <button>删除</button> -->
                </li>
            `;
            localStorage.removeItem('xuan2arr');
            xuan2arr = [];
            ul2.children[0].children[0].addEventListener('keydown', handle2);

            ul2.children[0].children[0].addEventListener('blur', function () {
                // if (this.value != '') {
                xuan2arr[0] = this.value;
                // }
                localStorage.setItem('xuan2arr', JSON.stringify(xuan2arr));
            });
        });


        // ul.children[0].children[0].addEventListener('keydown', handle1);
        // ul.children[0].children[0].addEventListener('keydown', handle2);
        // ul.children[0].children[0].addEventListener('keydown', handle3);
        ul.children[0].children[0].addEventListener('blur', function () {
            // if (this.value != '') {
            xuan1arr[0] = this.value;
            // }
            localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));
        });
        ul2.children[0].children[0].addEventListener('blur', function () {
            // if (this.value != '') {
            xuan2arr[0] = this.value;
            // }
            localStorage.setItem('xuan2arr', JSON.stringify(xuan2arr));
        });

        if (xuan1arr.length != 0) {
            for (let i = 1; i < xuan1arr.length; i++) {
                // 创建 li
                let li = document.createElement('li');
                // li.innerHTML = `
                //     <input type="text" name="" id="" value="" maxlength="3" placeholder="限3字">
                // `;
                let input = document.createElement('input');
                input.type = 'text';
                input.maxLength = '4';
                input.placeholder = '限4个字';
                input.addEventListener('blur', function () {
                    for (let i = 0; i < ul.children.length; i++) {
                        // if (ul.children[i].children[0].value != '') {
                        xuan1arr[i] = ul.children[i].children[0].value;
                        // }
                    }
                    localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));
                });
                li.appendChild(input);
                // 添加 li
                ul.appendChild(li);
                ul.children[i].children[0].value = xuan1arr[i];
            }

            // 获取删除按钮
            for (let i = 0; i < ul.children.length; i++) {
                ul.children[i].children[0].addEventListener('keydown', function (e) {
                    if (this.value === '') {
                        if (e.key === 'Delete' || e.key === 'Backspace') {
                            if (ul.children.length === 1) {
                                return;
                            }
                            // 删除父元素 li
                            this.parentNode.remove();
                            console.log('删除后li数量', ul.children.length);
                            for (let i = 0; i < ul.children.length; i++) {
                                ul.children[i].children[0].removeEventListener('keydown', handle);
                            }
                            ul.children[ul.children.length - 1].children[0].addEventListener('keydown', handle);
                            xuan1arr = [];
                            for (let i = 0; i < ul.children.length; i++) {
                                if (ul.children[i].children[0].value != '') {
                                    xuan1arr[i] = ul.children[i].children[0].value;
                                }
                            }
                            console.log(xuan1arr);
                            localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));
                        }
                    }
                });
            }
        }
        if (xuan2arr.length != 0) {
            for (let i = 1; i < xuan2arr.length; i++) {
                // 创建 li
                let li = document.createElement('li');
                // li.innerHTML = `
                //     <input type="text" name="" id="" value="" maxlength="3" placeholder="限3字">
                // `;
                let input = document.createElement('input');
                input.type = 'text';
                input.maxLength = '4';
                input.placeholder = '限4个字';
                input.addEventListener('blur', function () {
                    for (let i = 0; i < ul2.children.length; i++) {
                        // if (ul2.children[i].children[0].value != '') {
                        xuan2arr[i] = ul2.children[i].children[0].value;
                        // }
                    }
                    localStorage.setItem('xuan2arr', JSON.stringify(xuan2arr));
                });
                li.appendChild(input);
                // 添加 li
                ul2.appendChild(li);
                ul2.children[i].children[0].value = xuan2arr[i];
            }

            // 获取删除按钮
            for (let i = 0; i < ul2.children.length; i++) {
                ul2.children[i].children[0].addEventListener('keydown', function (e) {
                    if (this.value === '') {
                        if (e.key === 'Delete' || e.key === 'Backspace') {
                            if (ul2.children.length === 1) {
                                return;
                            }
                            // 删除父元素 li
                            this.parentNode.remove();
                            console.log('删除后li2数量', ul2.children.length);
                            for (let i = 0; i < ul2.children.length; i++) {
                                ul2.children[i].children[0].removeEventListener('keydown', handle2);
                            }
                            ul2.children[ul2.children.length - 1].children[0].addEventListener('keydown', handle2);
                            xuan2arr = [];
                            for (let i = 0; i < ul2.children.length; i++) {
                                if (ul2.children[i].children[0].value != '') {
                                    xuan2arr[i] = ul2.children[i].children[0].value;
                                }
                            }
                            console.log(xuan2arr);
                            localStorage.setItem('xuan2arr', JSON.stringify(xuan2arr));
                        }
                    }
                });
            }
        }


        if (xuan1arr.length == 0) {
            ul.children[0].children[0].addEventListener('keydown', handle);
        } else {
            ul.children[xuan1arr.length - 1].children[0].addEventListener('keydown', handle);
        }
        if (xuan2arr.length == 0) {
            ul2.children[0].children[0].addEventListener('keydown', handle2);
        } else {
            ul2.children[xuan2arr.length - 1].children[0].addEventListener('keydown', handle2);
        }


        // 点击添加按钮
        addBtn.addEventListener('click', function () {
            // 创建 li
            let li = document.createElement('li');
            // li.innerHTML = `
            //     <input type="text" name="" id="" value="" maxlength="3" placeholder="限3字">
            // `;
            let input = document.createElement('input');
            input.type = 'text';
            input.maxLength = '4';
            input.placeholder = '限4个字';
            input.addEventListener('blur', function () {
                xuan1arr = [];
                for (let i = 0; i < ul.children.length; i++) {
                    // if (ul.children[i].children[0].value != '') {
                    xuan1arr[i] = ul.children[i].children[0].value;
                    // }
                }
                localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));
            });
            li.appendChild(input);
            // 添加 li
            ul.appendChild(li);
            ul.children[ul.children.length - 1].children[0].focus();
            inputs = document.querySelectorAll('input');

            for (let i = 0; i < ul.children.length; i++) {
                ul.children[i].children[0].removeEventListener('keydown', handle);
            }
            ul.children[ul.children.length - 1].children[0].addEventListener('keydown', handle);

            console.log('添加后li数量', ul.children.length);

            // for (let i = 0; i < ul.children.length; i++) {
            //     ul.children[i].children[0].addEventListener('keydown', function (e) {

            //     });
            // }

            // 获取删除按钮
            for (let i = 0; i < ul.children.length; i++) {
                ul.children[i].children[0].addEventListener('keydown', function (e) {
                    if (this.value === '') {
                        if (e.key === 'Delete' || e.key === 'Backspace') {
                            if (ul.children.length === 1) {
                                // let tim=setTimeout(function(){
                                //     ul.children[0].children[0].focus();
                                //     clearTimeout(tim);
                                // },0);
                                return;
                            }

                            // 删除父元素 li
                            this.parentNode.remove();
                            // for (let i = 0; i < ul.children.length; i++) {
                            //     ul.children[i].setAttribute('tempIndex', i)
                            // }
                            console.log('删除后li数量', ul.children.length);
                            for (let i = 0; i < ul.children.length; i++) {
                                ul.children[i].children[0].removeEventListener('keydown', handle);
                            }
                            ul.children[ul.children.length - 1].children[0].addEventListener('keydown', handle);

                            xuan1arr = [];
                            for (let i = 0; i < ul.children.length; i++) {
                                // if (ul.children[i].children[0].value != '') {
                                xuan1arr[i] = ul.children[i].children[0].value;
                                // }
                            }
                            localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));


                            // for (let i = 0; i < ul.children.length; i++) {
                            //     ul.children[i].children[0].addEventListener('keydown', function (e) {
                            //         // console.log(e.key);
                            //         if (e.key === 'ArrowUp') {
                            //             console.log('删除后上i', i);
                            //             if (ul.children.length === 1) return;
                            //             if (i === 0) {
                            //                 return;
                            //             }
                            //             ul.children[i - 1].children[0].focus();
                            //         }
                            //         if (e.key === 'ArrowDown') {
                            //             console.log('删除后下i', i);
                            //             if (i >= ul.children.length - 1) {
                            //                 return;
                            //             }
                            //             ul.children[i + 1].children[0].focus();
                            //         }
                            //         if (e.key === 'ArrowLeft') {
                            //             console.log('删除后左i', i);
                            //             if (ul.children.length === 1) return;
                            //             if (i === 0) {
                            //                 return;
                            //             }
                            //             ul.children[i - 1].children[0].focus();
                            //         }
                            //         if (e.key === 'ArrowRight') {
                            //             console.log('删除后右i', i);
                            //             if (i >= ul.children.length - 1) {
                            //                 return;
                            //             }
                            //             ul.children[i + 1].children[0].focus();
                            //         }
                            //     });
                            // }
                            // if (ul.children.length === 1) return;
                            // if (i === 0) return;
                            // let ti = setTimeout(()=> {
                            //     i--;
                            //     console.log('删除后i', i);
                            //     // if (i === 0) {
                            //     //     ul.children[0].children[0].focus();
                            //     //     return;
                            //     // }

                            //     if (i <= 0) {
                            //         ul.children[0].children[0].focus();
                            //         clearTimeout(ti);
                            //         return;
                            //     }
                            //     let tempIndex = ul.children[i].getAttribute('tempIndex');
                            //     console.log('temoIndex', tempIndex);
                            //     ul.children[tempIndex].children[0].focus();
                            //     clearTimeout(ti);
                            // }, 0);
                            // console.log('删除后i', i);
                            // if (i === 0) {
                            //     ul.children[0].children[0].focus();
                            //     return;
                            // }
                            // ul.children[i - 1].children[0].focus();
                        }
                    }
                });
            }


            // 将所有的必填1存入本地存储
            // for (let i = 0; i < ul.children.length; i++) {
            //     xuan1arr[i] = ul.children[i].children[0].value;
            // }
            // localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));
        });

        addBtn2.addEventListener('click', function () {
            // 创建 li
            let li = document.createElement('li');
            // li.innerHTML = `
            //     <input type="text" name="" id="" value="" maxlength="3" placeholder="限3字">
            // `;
            let input = document.createElement('input');
            input.type = 'text';
            input.maxLength = '4';
            input.placeholder = '限4个字';
            input.addEventListener('blur', function () {
                for (let i = 0; i < ul2.children.length; i++) {
                    // if (ul2.children[i].children[0].value != '') {
                    xuan2arr[i] = ul2.children[i].children[0].value;
                    // }
                }
                localStorage.setItem('xuan2arr', JSON.stringify(xuan2arr));
            });
            li.appendChild(input);
            // 添加 li
            ul2.appendChild(li);
            ul2.children[ul2.children.length - 1].children[0].focus();
            inputs2 = document.querySelectorAll('input');

            for (let i = 0; i < ul2.children.length; i++) {
                ul2.children[i].children[0].removeEventListener('keydown', handle2);
            }
            ul2.children[ul2.children.length - 1].children[0].addEventListener('keydown', handle2);

            console.log('添加后li2数量', ul2.children.length);

            // 获取删除按钮
            for (let i = 0; i < ul2.children.length; i++) {
                ul2.children[i].children[0].addEventListener('keydown', function (e) {
                    if (this.value === '') {
                        if (e.key === 'Delete' || e.key === 'Backspace') {
                            if (ul2.children.length === 1) {
                                return;
                            }

                            // 删除父元素 li
                            this.parentNode.remove();
                            console.log('删除后li2数量', ul2.children.length);
                            for (let i = 0; i < ul2.children.length; i++) {
                                ul2.children[i].children[0].removeEventListener('keydown', handle2);
                            }
                            ul2.children[ul2.children.length - 1].children[0].addEventListener('keydown', handle2);


                            xuan2arr = [];
                            for (let i = 0; i < ul2.children.length; i++) {
                                // if (ul2.children[i].children[0].value != '') {
                                xuan2arr[i] = ul2.children[i].children[0].value;
                                // }
                            }
                            localStorage.setItem('xuan2arr', JSON.stringify(xuan2arr));



                            // let ti = setTimeout(function () {
                            //     console.log('删除后i2', i);
                            //     if (i === 0) {
                            //         ul2.children[0].children[0].focus();
                            //         return;
                            //     }
                            //     ul2.children[i - 1].children[0].focus();
                            //     clearTimeout(ti);
                            // }, 0);
                        }
                    }
                });
            }
        });


        /*
            点击 删除 按钮，从 "心中的答案" 区域删除对应的答案
        */
        // 获取删除按钮
        // for (let i = 0; i < ul.children.length; i++) {
        //     ul.children[i].children[1].addEventListener('click', function () {
        //         // 删除父元素 li
        //         this.parentNode.remove();
        //         // 清除其它 input 中的回车事件，给最后一个 input 添加回车事件
        //         if (ul.children.length === 0) return;
        //         for (let i = 0; i < ul.children.length; i++) {
        //             ul.children[i].children[0].removeEventListener('keydown', handle);
        //         }
        //         ul.children[ul.children.length - 1].children[0].addEventListener('keydown', handle);
        //     });
        // }
        // 别忘了在新添加的 li 中给 删除 按钮添加点击事件



        /*
            点击 "寻求天使帮助" 按钮，从 "心中的答案" 区域随机选出一个答案
        */
        // 获取选择按钮 "寻求天使帮助"
        let chooseBtn = document.querySelectorAll('.btn-choose button')[0];
        let chooseBtn2 = document.querySelectorAll('.btn-choose button')[1];
        // 存储问题的数组
        let questionArr = JSON.parse(localStorage.getItem('questionArr')) || [];
        // let questionArr2 = [];
        let resArr = [];
        // 获取 "天使建议您" 区域
        let tianshi = document.querySelector('.tianshi .content');
        tianshi.innerHTML = localStorage.getItem('res');
        // 获取 清空答案 按钮
        let clearBtn = document.querySelectorAll('.btn-clear button')[1];
        // 获取 重置 按钮
        let chongzhi = document.querySelectorAll('.btn-clear button')[0];
        // 获取所有的按钮
        let btns = document.querySelectorAll('.xuan1 button');
        let btns2 = document.querySelectorAll('.xuan2 button');


        // 点击选择按钮随机
        chooseBtn.addEventListener('click', function () {
            this.disabled = true;
            clearBtn.disabled = true;
            chongzhi.disabled = true;
            if (ul.children.length === 0) {
                alert('请添加必填内容');
                return;
            }
            if (ul.children.length === 1 && ul.children[0].children[0].value.trim() === '') {
                alert('请输入必填内容');
                return;
            }
            for (let i = 0; i < ul.children.length; i++) {
                if (ul.children[i].children[0].value.trim() === '') {
                    alert('请补全必填内容');
                    return;
                }
            }
            // 可能出现后添加的输入框和按钮，需要重新获取一下
            inputs = document.querySelectorAll('.xuan1 input');
            btns = document.querySelectorAll('.xuan1 button');
            // 让所有的 inputs 不可用
            for (let i = 0; i < inputs.length; i++) {
                inputs[i].disabled = true;
            }
            // 让所有的按钮不可用
            for (let i = 0; i < btns.length; i++) {
                btns[i].disabled = true;
            }

            // 随机索引
            let randomNum = getRandomNumber(0, ul.children.length - 1);
            // 每 0.09 秒选出一个结果
            let smallTimer = setInterval(() => {
                // 随机数数组
                let temArr = randomNumberToArr(0, ul.children.length - 1);
                // 随机索引
                randomNum = getRandomNumber(0, ul.children.length - 1);
                // 对随机索引进行加工，更加随机
                randomNum = temArr[randomNum];
                // 让其它输入框不变色
                for (let i = 0; i < ul.children.length; i++) {
                    ul.children[i].children[0].style.backgroundColor = '';
                }
                let ssTimer = setTimeout(() => {
                    // 让当前输入框变色
                    ul.children[randomNum].children[0].style.backgroundColor = '#FFCAC6';
                    clearTimeout(ssTimer);
                }, 100);
            }, 90);
            // 3 秒后选出最终结果
            let bigTimer = setTimeout(() => {
                clearInterval(smallTimer);
                // 让其它输入框不变色
                for (let i = 0; i < ul.children.length; i++) {
                    ul.children[i].children[0].style.backgroundColor = '';
                }

                // 将问题添加到数组
                let question = '>>> ' + document.querySelector('.question input').value + ' <<<';
                if (document.querySelector('.question input').value.trim() === '') {
                    question = '>>> 命1未录入的问题 <<<';
                }
                let index = questionArr.indexOf(question);
                // 如果没有就添加
                if (index < 0) {
                    questionArr.push(question);
                    localStorage.setItem('questionArr', JSON.stringify(questionArr));
                }
                console.log('index:', index);
                console.log(questionArr);

                // 将答案添加到 "天使建议您" 区域
                // 如果问题未出现过，就添加，否则，就在对应的问题下添加答案即可
                if (index < 0 || tianshi.innerHTML === '') {
                    // 创建 dl
                    let dl = document.createElement('dl');
                    // 创建 dt
                    let dt = document.createElement('dt');
                    dt.innerHTML = question;
                    // 创建 dd
                    let dd = document.createElement('dd');
                    dd.innerHTML = ul.children[randomNum].children[0].value;
                    if (ul.children[randomNum].children[0].value.trim() === '') {
                        dd.innerHTML = '未录入的答案';
                    }
                    dl.appendChild(dt);
                    dl.appendChild(dd);
                    tianshi.appendChild(dl);
                    console.log(2);
                    localStorage.setItem('res', tianshi.innerHTML);
                } else {// 创建 dd
                    let dd = document.createElement('dd');
                    dd.innerHTML = ul.children[randomNum].children[0].value;
                    if (ul.children[randomNum].children[0].value.trim() === '') {
                        dd.innerHTML = '未知答案';
                    }
                    tianshi.children[index].appendChild(dd);
                    console.log(1);
                    localStorage.setItem('res', tianshi.innerHTML);
                }

                let ssTimer = setTimeout(() => {
                    // 让当前输入框变色
                    ul.children[randomNum].children[0].style.backgroundColor = '#FFCAC6';
                    clearTimeout(ssTimer);
                }, 100);

                // 让所有的 inputs 可用
                for (let i = 0; i < inputs.length; i++) {
                    inputs[i].disabled = false;
                }
                // 让所有的按钮可用
                for (let i = 0; i < btns.length; i++) {
                    btns[i].disabled = false;
                }
                this.disabled = false;
                clearBtn.disabled = false;
                chongzhi.disabled = false;
                clearTimeout(bigTimer);
            }, 2700);
        });

        chooseBtn2.addEventListener('click', function () {
            this.disabled = true;
            clearBtn.disabled = true;
            chongzhi.disabled = true;
            if (ul2.children.length === 0) {
                alert('请添加必填内容');
                return;
            }
            if (ul2.children.length === 1 && ul2.children[0].children[0].value.trim() === '') {
                alert('请输入必填内容');
                return;
            }
            for (let i = 0; i < ul2.children.length; i++) {
                if (ul2.children[i].children[0].value.trim() === '') {
                    alert('请补全必填内容');
                    return;
                }
            }
            // 可能出现后添加的输入框和按钮，需要重新获取一下
            inputs2 = document.querySelectorAll('.xuan2 input');
            btns2 = document.querySelectorAll('.xuan2 button');
            // 让所有的 inputs 不可用
            for (let i = 0; i < inputs2.length; i++) {
                inputs2[i].disabled = true;
            }
            // 让所有的按钮不可用
            for (let i = 0; i < btns2.length; i++) {
                btns2[i].disabled = true;
            }

            // 随机索引
            let randomNum = getRandomNumber(0, ul2.children.length - 1);
            // 每 0.09 秒选出一个结果
            let smallTimer = setInterval(() => {
                // 随机数数组
                let temArr = randomNumberToArr(0, ul2.children.length - 1);
                // 随机索引
                randomNum = getRandomNumber(0, ul2.children.length - 1);
                // 对随机索引进行加工，更加随机
                randomNum = temArr[randomNum];
                // 让其它输入框不变色
                for (let i = 0; i < ul2.children.length; i++) {
                    ul2.children[i].children[0].style.backgroundColor = '';
                }
                let ssTimer = setTimeout(() => {
                    // 让当前输入框变色
                    ul2.children[randomNum].children[0].style.backgroundColor = '#FFCAC6';
                    clearTimeout(ssTimer);
                }, 100);
            }, 90);
            // 3 秒后选出最终结果
            let bigTimer = setTimeout(() => {
                clearInterval(smallTimer);
                // 让其它输入框不变色
                for (let i = 0; i < ul2.children.length; i++) {
                    ul2.children[i].children[0].style.backgroundColor = '';
                }

                // 将问题添加到数组
                let question = '>>> ' + document.querySelector('.question2 input').value + ' <<<';
                if (document.querySelector('.question2 input').value.trim() === '') {
                    question = '>>> 命2未录入的问题 <<<';
                }
                let index = questionArr.indexOf(question);
                // 如果没有就添加
                if (index < 0) {
                    questionArr.push(question);
                    localStorage.setItem('questionArr', JSON.stringify(questionArr));
                }
                console.log('index:', index);
                console.log(questionArr);

                // 将答案添加到 "天使建议您" 区域
                // 如果问题未出现过，就添加，否则，就在对应的问题下添加答案即可
                if (index < 0 || tianshi.innerHTML === '') {
                    // 创建 dl
                    let dl = document.createElement('dl');
                    // 创建 dt
                    let dt = document.createElement('dt');
                    dt.innerHTML = question;
                    // 创建 dd
                    let dd = document.createElement('dd');
                    dd.innerHTML = ul2.children[randomNum].children[0].value;
                    if (ul2.children[randomNum].children[0].value.trim() === '') {
                        dd.innerHTML = '未录入的答案';
                    }
                    dl.appendChild(dt);
                    dl.appendChild(dd);
                    tianshi.appendChild(dl);
                    console.log(2);
                    localStorage.setItem('res', tianshi.innerHTML);
                } else {// 创建 dd
                    let dd = document.createElement('dd');
                    dd.innerHTML = ul2.children[randomNum].children[0].value;
                    if (ul2.children[randomNum].children[0].value.trim() === '') {
                        dd.innerHTML = '未知答案';
                    }
                    tianshi.children[index].appendChild(dd);
                    console.log(1);
                    localStorage.setItem('res', tianshi.innerHTML);
                }

                let ssTimer = setTimeout(() => {
                    // 让当前输入框变色
                    ul2.children[randomNum].children[0].style.backgroundColor = '#FFCAC6';
                    clearTimeout(ssTimer);
                }, 100);

                // 让所有的 inputs 可用
                for (let i = 0; i < inputs2.length; i++) {
                    inputs2[i].disabled = false;
                }
                // 让所有的按钮可用
                for (let i = 0; i < btns2.length; i++) {
                    btns2[i].disabled = false;
                }
                this.disabled = false;
                clearBtn.disabled = false;
                chongzhi.disabled = false;
                clearTimeout(bigTimer);
            }, 2700);
        });


        /*
            点击 清空答案 按钮，清空答案
        */

        clearBtn.addEventListener('click', function () {
            tianshi.innerHTML = '';
            // questionArr = [];
            localStorage.removeItem('questionArr');
            // questionArr2 = [];
            localStorage.removeItem('res');
        });
    </script>
</body>

</html>
