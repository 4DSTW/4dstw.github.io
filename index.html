<!DOCTYPE html>
<html lang="en">

<head>
    <!-- 
        作者：ICAN
        开始时间：20231007
        结束时间：20231014
        邮箱：1873063962@qq.com、17602640523@163.com
    -->
    <!-- 
        测试：
            刷新页面：点击后查看页面是否刷新

            幸运数字：刷新页面查看幸运数字是否更新

            日期时间：
                1.查看日期是否正确
                2.刷新页面，查看日期是否正确

            随机数：
                1.输入错误的内容：66. 66- 66s
                2.超出范围，查看是否显示提示信息
                3.输入错误的范围，查看是否显示提示信息
                4.刷新页面，查看随机数是否更新
                5.点击生成按钮，查看随机数是否在范围内

            主题：
                1.输入主题，失去焦点，刷新页面，查看主题是否保存
                2.相同主题，分别生成
                3.不同主题，分别生成
                4.相同主题，分别生成，刷新页面，不同主题，分别生成
                5.不同主题，分别生成，刷新页面，相同主题，分别生成

            主题内容：
                1.添加功能、回车功能
                    初始结构
                    单个输入框
                    从后面删除，然后添加
                    从中间删除，然后添加
                2.删除功能
                    初始结构
                    从后面删除，然后添加
                    从中间删除，然后添加
                3.方向键功能
                    初始结构
                    添加输入框，然后按方向键
                    从后面删除，然后按方向键
                    从中间删除，然后按方向键
            
            批量录入功能：追加录入、重新录入、关闭页面、本地存储

            结果生成区域：刷新页面是否保存

            草稿：刷新页面是否保存

    -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICAN</title>
    <!-- 旋转数组 -->
    <script>
        /**
         * 旋转数组 升索引(顺时针) 或者 降索引(逆时针)
         * 
         * create:  2023.7.30 15:17
         * author:  ican
         * funName: isIntegerStrict(number)
         * args:    arr1In           传入需要旋转的数组
         *          howmanyIndex    需要升/降多少索引
         *          isUp            是否升序，true是升序(顺时针)，false是降序(逆时针)，不写则取false
         * return:  Array           返回旋转后的数组
         * version: v1.0
         */
        function rotateArr(arr1In, howmanyIndex, isUp) {
            if (!Array.isArray(arr1In)) {
                return false;
            }

            // 判断数字是不是整数
            if (!Number.isInteger(howmanyIndex)) {
                return false;
            }

            if (howmanyIndex < 0) {
                return false;
            }

            // 如果 howmanyIndex > arr1In.length，howmanyIndex应该取多少？
            // [1,2]      长度为2，降3次，相当于降1次  [2,1] [1,2] [2,1]
            // [1,2,3,4]  长度为4，降4次，相当于没降   [2,3,4,1] [3,4,1,2] [4,1,2,3] [1,2,3,4]
            // number % 0 = NaN
            if (howmanyIndex % arr1In.length === 0 || arr1In.length === 0) {
                return arr1In;
            } else {
                howmanyIndex = howmanyIndex % arr1In.length;
            }

            // 使用者可能不对当前数组降索引，所以要创建结果数组
            let arr1Out = [];

            if (isUp) {
                // 数组前面的部分进行升序，排到后面
                // 假设：
                // howmanyIndex = 2  1  3
                // [1,2,3,4,5]  [1,2,3,4,5]   [1,2,3,4,5]
                // [4,5,1,2,3]  [5,1,2,3,4]   [3,4,5,1,2]
                // [,,1,2,3]    [,1,2,3,4]    [,,,1,2]
                for (let i = howmanyIndex, j = 0; i < arr1In.length; i++, j++) {
                    // 2 = 0  1 = 0  3 = 0
                    // 3 = 1  2 = 1  4 = 0
                    // 4 = 2  3 = 2
                    //        4 = 3
                    arr1Out[i] = arr1In[j];
                }

                // 数组后面的部分进行降序，排到前面
                // 假设：
                // howmanyIndex = 2  1  4
                // [1,2,3,4,5]  [1,2,3,4,5]  [1,2,3,4,5]
                // [4,5,1,2,3]  [5,1,2,3,4]  [2,3,4,5,1]
                // [4,5,,,]     [5,,,,]      [2,3,4,5,]
                for (let i = 0; i < howmanyIndex; i++) {
                    // 0 = 3  0 = 4  0 = 1
                    // 1 = 4         1 = 2
                    //               2 = 3
                    //               3 = 4
                    arr1Out[i] = arr1In[arr1In.length - howmanyIndex + i];
                }
            } else {
                // 数组前面的部分进行升序，排到后面
                // 假设：
                // howmanyIndex = 2  1
                // [1,2,3,4,5]  [1,2,3,4,5]
                // [3,4,5,1,2]  [2,3,4,5,1]
                // [,,,1,2]     [,,,,1]
                for (let i = arr1In.length - howmanyIndex, j = 0; i < arr1In.length; i++, j++) {
                    // 3 = 0  4 = 0
                    // 4 = 1
                    arr1Out[i] = arr1In[j];
                }

                // 数组后面的部分进行降序，排到前面
                // 假设：
                // howmanyIndex = 2  1
                // [1,2,3,4,5]  [1,2,3,4,5]
                // [3,4,5,1,2]  [2,3,4,5,1]
                // [3,4,5,,]    [2,3,4,5,]
                for (let i = 0; i < arr1In.length - howmanyIndex; i++) {
                    // 0 = 2  0 = 1
                    // 1 = 3  1 = 2
                    // 2 = 4  2 = 3
                    //        3 = 4
                    arr1Out[i] = arr1In[i + howmanyIndex];
                }
            }

            // 返回结果数组
            return arr1Out;
        }
    </script>
    <!-- 生成范围内的乱序数组、生成随机数、判断正整数、判断整数 -->
    <script>
        // 生成所有 [min, max] 之间的数值组成一个数组并返回
        function randomNumberToArr(min, max) {
            let arr1 = []
            for (let i = 0; i < max - min + 1; i++) {
                let n = getRandomNumber(min, max)
                while (arr1.indexOf(n) >= 0) {
                    // console.log('-------------------')
                    n = getRandomNumber(min, max)
                }
                arr1[i] = n
            }
            return arr1
        }

        /**
         * 生成一定范围内的随机整数，左右都包含
         * 
         * create:  2023.7.30 16:03
         * author:  ican
         * funName: randomNumber(min, max)
         * args:    min             范围的最小值
         *          max             范围的最大值
         * return:  number          返回生成的随机整数
         * version: v1.0
         */
        function getRandomNumber(min, max) {
            if (min > max) {
                return false;
            }
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        /**
         * 判断输入的字符串是否为正整数
         * 
         * create:  2023.7.30 14:28
         * author:  ican
         * funName: isIntegerStringPositive(str)
         * args:    str             String字符串类型
         * return:  Boolean         true/false
         * version: v1.0
         */
        function isIntegerStringPositive(str) {
            if (isNaN(Number(str))) {
                return false;
            }
            if (str === 'null' || str === null) {
                return false;
            }
            if (typeof parseInt(str) !== 'number') {
                return false;
            }
            if (str.trim() === '' || str.indexOf('.') > -1) {
                return false;
            }
            return true;
        }

        /**
         * 判断所以类型是否为整数【严格模式】
         * 
         * create:  2023.7.30 13:30
         * author:  ican
         * funName: isIntegerStrict(number)
         * args:    number          Integer整数类型
         * return:  Boolean         true/false
         * version: v1.0
         */
        function isIntegerAllStrict(number) {
            if (Number.isInteger) {
                return Number.isInteger(number);
            } else {
                return typeof number === 'number' && number % 1 === 0;
            }
        }
    </script>

    <style>
        /* 设置常用的字体样式 */
        body,
        button,
        input,
        select,
        textarea {
            font-family: Microsoft YaHei, Heiti SC, tahoma, arial, Hiragino Sans GB, "\5B8B\4F53", sans-serif;
        }

        body {
            /* background: linear-gradient(to bottom right, #3b0063, #690000); */
            /* background: linear-gradient(to bottom right, #1a0057, #58003a); */
            background: linear-gradient(to bottom right, #300055, #530000);
            background-color: #222;
            /* animation: bodyBg 5s linear infinite; */
            /* transition: all .5s; */
        }

        /* @keyframes bodyBg {
            0% {
                background: linear-gradient(to bottom right, #3b0063, #690000);
            }
            50% {
                background: linear-gradient(to bottom right, #003d63, #4b0069);
            }

            100% {
                background: linear-gradient(to bottom right, #3b0063, #690000);
            }
        } */

        /* body {
            background-image: linear-gradient(to right, #a3a4ff, #deb0ff, #ff9b9b);
        } */

        /*
            设置盒子的滚动条样式
        */
        .content_box::-webkit-scrollbar {
            /*滚动条整体样式*/
            width: 9px;
            /*高宽分别对应横竖滚动条的尺寸*/
            height: 1px;
        }

        .content_box::-webkit-scrollbar-thumb {
            border: 0;
            /*滚动条里面小方块*/
            border-radius: 9px;
            /* background-color: skyblue; */
            /* background-color: rgba(46, 139, 134, 0.7); */
            /* background-color: #225fc1; */
            background-color: #3c0026;
            background-color: #610002;
            background-color: #5f0024;
            /* background-color: #7e0918; */
            /* background-color: #59097e; */
            background-image: -webkit-linear-gradient(45deg,
                    rgba(255, 255, 255, 0.2) 25%,
                    transparent 25%,
                    transparent 50%,
                    rgba(255, 255, 255, 0.2) 50%,
                    rgba(255, 255, 255, 0.2) 75%,
                    transparent 75%,
                    transparent);
        }

        .content_box::-webkit-scrollbar-track {
            /*滚动条里面轨道*/
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
            /* background: #ededed80; */
            /* background: #989898; */
            background: rgba(255, 255, 255, 0.5);
            border-radius: 9px;
        }

        .content_box2::-webkit-scrollbar {
            /*滚动条整体样式*/
            width: 6px;
            /*高宽分别对应横竖滚动条的尺寸*/
            height: 1px;
        }

        .content_box2::-webkit-scrollbar-thumb {
            border: 0;
            /*滚动条里面小方块*/
            border-radius: 6px;
            /* background-color: skyblue; */
            background-color: rgba(46, 139, 134, 0.7);
            background-color: #3c0026;
            background-color: #28005c;
            background-image: -webkit-linear-gradient(45deg,
                    rgba(255, 255, 255, 0.2) 25%,
                    transparent 25%,
                    transparent 50%,
                    rgba(255, 255, 255, 0.2) 50%,
                    rgba(255, 255, 255, 0.2) 75%,
                    transparent 75%,
                    transparent);
        }

        .content_box2::-webkit-scrollbar-track {
            /*滚动条里面轨道*/
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
            /* background: #989898; */
            background: rgba(255, 255, 255, 0.3);
            border-radius: 6px;
        }

        .content_box3::-webkit-scrollbar {
            /*滚动条整体样式*/
            width: 6px;
            /*高宽分别对应横竖滚动条的尺寸*/
            height: 1px;
        }

        .content_box3::-webkit-scrollbar-thumb {
            border: 0;
            /*滚动条里面小方块*/
            border-radius: 9px;
            /* background-color: skyblue; */
            /* background-color: rgba(46, 139, 134, 0.7); */
            /* background-color: #225fc1; */
            background-color: #3c0026;
            background-color: #610002;
            background-color: #74002d;
            /* background-color: #7e0918; */
            /* background-color: #59097e; */
            background-image: -webkit-linear-gradient(45deg,
                    rgba(255, 255, 255, 0.2) 25%,
                    transparent 25%,
                    transparent 50%,
                    rgba(255, 255, 255, 0.2) 50%,
                    rgba(255, 255, 255, 0.2) 75%,
                    transparent 75%,
                    transparent);
        }

        .content_box3::-webkit-scrollbar-track {
            /*滚动条里面轨道*/
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
            /* background: #ededed80; */
            /* background: #989898; */
            background: rgba(255, 255, 255, 0.5);
            border-radius: 9px;
        }

        * {
            margin: 0;
            padding: 0;
        }

        body {
            cursor: default;
        }

        li {
            position: relative;
            list-style: none;
            text-align: center;
        }

        div {
            box-sizing: border-box;
        }

        /* li button {
            position: absolute;
            right: 50%;
            top: 10px;
            transform: translate(159px);
            width: 52px;
            height: 26px;
            background-color: pink;
            background-color: #111;
            background-color: #EA4335;
            border: 0;
            font-size: 16px;
            border-radius: 6px;
            font-weight: 700;
            color: #222;
            color: #fff;
            line-height: 24px;
            letter-spacing: 2px;
            transition: all .2s;
        } */

        /* li button:hover {
            background-color: #cd3325;
        }

        li button:active {
            background-color: #cd3325;
        } */

        input {
            outline: none;
            font-size: 17px;
            /* padding: 0px 6px; */
            height: 24px;
            line-height: 24px;
            width: 324px;
            width: 290px;
            text-align: center;
            transition: all .2s;
            border-radius: 6px;
            /* border: 2px solid pink;
            border: 2px solid #111; */
            margin: 6px 0;
            background-color: rgba(255, 255, 255, 0);
            color: #eee;
        }

        /* .question input {
            border: 2px solid #EA4335;
            border: 2px solid #f9fffa;
        } */

        /* li input {
            border: 2px solid #EA4335;
            width: 68px;
        } */

        .main-content {
            width: 96%;
            margin: 10px auto;
            /* background-color: pink; */
        }

        .top-line {
            width: 100%;
            height: 1px;
            /* background-color: pink;
            background-color: #111; */
            background-color: #b74fb7;
            /* background-color: rgba(219, 27, 101, 0.4); */
            background-color: #bbb;
            margin: 0 0 6px;
            /* animation: btnChange 6s linear infinite; */
        }

        .main-content h1 {
            /* color: deeppink; */
            text-align: center;
            margin: 6px 0;
        }

        .main-content h3 {
            /* color: deeppink; */
            text-align: center;
            margin: 20px 0 6px;
            font-size: 20px;
            letter-spacing: 2px;
            font-weight: 400;
            /* color: #eee; */
        }

        /* .main-content>h3 {
            font-size: 22px;
        } */

        .question,
        .question2 {
            text-align: center;
        }

        .btn-add,
        .btn-choose,
        .btn-clear {
            text-align: center;
        }

        .reset-page {
            text-align: center;
        }

        .reset-page button,
        .btn-add button,
        .btn-choose button,
        .btn-clear button,
        .btn-add2 button {
            font-size: 17px;
            width: 100px;
            /* word-spacing: 3px; */
            text-align: center;
            height: 30px;
            line-height: 25px;
            /* background-color: pink;
            background-color: #111; */
            /* background-color: #315794; */
            border: none;
            /* font-weight: 700; */
            color: #222;
            color: #eee;
            letter-spacing: 1px;
        }

        .reset-page button,
        .btn-add button,
        .btn-clear button,
        .btn-add2 button {
            border-radius: 6px;
        }

        .reset-page button,
        .btn-clear button {
            /* background-color: #630081; */
            background-color: rgba(219, 27, 101, 0.5);
            /* background-color: #ab108f; */
            /* background-color: #981dd2; */
            height: 24px;
            font-size: 16px;
            line-height: 24px;
            margin-top: 6px !important;
            color: #eee;
        }

        .reset-page button:hover,
        .btn-clear button:hover {
            background-color: #560071;
            background-color: rgba(219, 27, 101, 0.5);
            /* background-color: #4e0b9f; */
        }

        .reset-page button:active,
        .btn-clear button:active {
            background-color: #560071;
            background-color: rgba(219, 27, 101, 0.5);
        }

        .btn-add button,
        .btn-add2 button {
            background-color: #630081;
            background-color: rgba(219, 27, 101, 0.5);
            /* background-color: rgba(255, 255, 255, 0); */
            /* border: 1px solid #eee; */
            height: 24px;
            line-height: 24px;
            font-size: 16px;
            width: 60px;
            margin-bottom: 6px;
            color: #eee;
            transition: all .3s;
        }

        .btn-add button:hover,
        .btn-add2 button:hover {
            background-color: #560071;
            background-color: rgba(219, 27, 101, 0.7);
        }

        .btn-add button:active,
        .btn-add button:active {
            background-color: #560071;
            background-color: rgba(219, 27, 101, 0.7);
        }

        .btn-choose button {
            width: 130px;
            height: 24px;
            line-height: 24px;
            border-radius: 6px;
            margin: 5px 0 0;
            font-size: 16px;
            /* animation: btnChange 6s linear infinite; */
            transition: all .2s;
            background-color: #630081;
            background-color: rgba(219, 27, 101, 0.5);
            /* color: #000; */
            /* font-weight: 700; */
        }

        .btn-choose button:hover {
            /* animation-play-state: paused; */
            background-color: #560071;
            background-color: rgba(219, 27, 101, 0.7);
        }

        .btn-choose button:active {
            background-color: #560071;
            background-color: rgba(219, 27, 101, 0.7);
        }

        .tianshi {
            /* width: 326px; */
            width: 100%;
            height: 211px;
            /* background-color: skyblue; */
            margin: 6px auto 0;
            border-radius: 6px;
            padding: 6px;
            text-align: center;
            /* border: 2px solid pink;
            border: 2px solid #111; */
            /* border: 1px solid #cb2222; */
            border: 1px solid #c76ec7;
            border: 1px dashed #ccc;
            overflow: auto;
        }

        .tianshi dt {
            font-size: 18px;
            /* font-weight: 700; */
            /* background-color: pink; */
            /* background-color: #111; */
            /* background-color: #3c80ee; */
            /* color: #2162ca; */
            padding: 3px 0 4px;
            color: #eee;
            /* border-radius: 3px; */
        }

        .tianshi dd {
            margin: 3px 3px;
            display: inline-block;
            /* background-color: #bbd5ff; */
            border-bottom: 1px solid #c76ec7;
            border-bottom: 1px solid #ddd;
            width: 72px;
            height: 24px;
            line-height: 24px;
            text-align: center;
            color: #eee;
        }

        .tianshi dl:nth-child(n+2) {
            /* border-top: 1px solid #111; */
            margin-top: 6px;
        }

        @media screen and (max-width:352px) {
            body {
                width: 342px;
            }
        }

        .blue {
            color: #3683ff;
        }

        .red {
            color: #e93434;
        }

        .orange {
            color: #FBBC05;
            color: #eabd34;
            /* color: #903ff4; */
            /* color: deeppink; */
        }

        .green {
            color: #28ba4f;
        }

        /* @keyframes btnChange {
            0% {
                background-color: #e13f30;
            }

            33% {
                background-color: #2162ca;
            }

            66% {
                background-color: #33A351;
            }

            100% {
                background-color: #e13f30;
            }
        } */

        .today input,
        .random-box1 input,
        .random-box2 input {
            border: none;
            border-bottom: 1px solid #eee;
            width: 24px;
            border-radius: 0px;
            /* background-color: #fff; */
            height: 20px;
            margin: 3px 0;
            font-size: 16px;
        }

        .random-box1 input,
        .random-box2 input {
            border-bottom: 1px solid #eee;
        }

        .today .maxlength-four {
            width: 40px;
        }

        .today button,
        .random-box1 button,
        .random-box2 button {
            width: 120px;
            height: 24px;
            background-color: rgba(219, 27, 101, 0.5);
            border: none;
            border-radius: 6px;
            color: #eee;
            font-size: 16px;
            transition: all .2s;
            letter-spacing: 1px;
            /* margin-top: 2px; */
            line-height: 24px;
        }

        .today button:hover,
        .random-box1 button:hover,
        .random-box2 button:hover {
            background-color: rgba(219, 27, 101, 0.7);
        }

        .box-good-number {
            /* color: #33A351; */
            color: #edc754;
            color: #eee;
            /* color: #b9c2f1; */
            margin: 20px 0 6px;
            font-weight: 700;
        }

        .date,
        .time {
            /* color: #33A351; */
            color: #eee;
        }

        .date input,
        .time input {
            /* color: #33A351; */
            color: #b9c2f1;
            color: #eee;
        }

        /* .date input,
        .time input {
            border-color: #8133a3;
        } */

        .randoms input,
        .randoms2 input {
            border-color: #eee;
        }

        .answers,
        .answers2 {
            /* width: 324px; */
            width: 100%;
            margin: auto;
            text-align: center;
        }

        h4 {
            font-weight: 400;
        }

        h3 {
            font-weight: 700 !important;
        }

        ul li {
            display: inline-block;
            width: 72px;
            margin: 3px 3px;
            /* margin: 6px 3px; */
        }

        .question input,
        .question2 input {
            border: none;
            border-bottom: 1px solid #d9b8b8;
            border-radius: 0px;
            font-size: 16px;
            margin: 3px 0;
        }

        ul li input {
            margin: 0px;
            border: none;
            border-bottom: 1px solid #d9b8b8;
            border-radius: 0px;
            font-size: 16px;
            padding: 0px;
            width: 72px;
        }

        .container .randomNum,
        .container .randomNum2 {
            height: 18px;
            /* line-height: 30px; */
            padding: 3px;
            /* background-color: pink; */
            background-color: rgba(219, 27, 101, 0.5);
            border: none;
            border-radius: 6px;
            color: #eee;
            /* color: #000; */
            font-size: 16px;
            transition: all .2s;
            letter-spacing: 1px;
            margin-top: 2px;
        }

        .write {
            width: 100%;
        }

        textarea {
            resize: none;
            width: 100%;
            height: 179px;
            margin: 12px auto;
            outline: none;
            font-size: 16px;
            border: 1px dashed #ccc;
            padding: 10px;
            border-radius: 6px;
            box-sizing: border-box;
            background-color: rgba(255, 255, 255, 0);
            color: #eee;
        }

        /* 必填1 批量录入窗口 下面的遮罩层 */
        .page-mask {
            display: none;
            position: fixed;
            left: 0;
            top: 0;
            z-index: 9;
            width: 100%;
            height: 100%;
            /* background-color: pink; */
            background-color: rgba(0, 0, 0, 0.3);
            /* transition: all .2s; */
        }

        /* 批量录入窗口中的按钮 */
        .input-box button,
        .input-box2 button,
        .tiqu-box1 button,
        .tiqu-box2 button {
            width: 67px;
            height: 24px;
            line-height: 19px;
            background-color: rgba(219, 27, 101, 0.5);
            color: #eee;
            border: none;
            border-radius: 3px;
            transition: all .3s;
        }

        .tiqu-box1 button,
        .tiqu-box2 button {
            margin: 0 20px;
        }

        .input-box button:hover,
        .input-box2 button:hover,
        .tiqu-box1 button:hover,
        .tiqu-box2 button:hover {
            background-color: rgba(219, 27, 101, 0.7);
        }

        /* 必填1 批量录入窗口 */
        .input-box,
        .input-box2,
        .tiqu-box1,
        .tiqu-box2 {
            display: none;
            position: fixed;
            left: 50%;
            top: 50%;
            z-index: 99;
            transform: translate(-50%, -50%);
            width: 300px;
            height: 417px;
            /* background-color: skyblue; */
            /* background-color: rgba(255, 255, 255, 0.9); */
            /* background-color: rgba(255, 255, 255, 0.4); */
            /* background: linear-gradient(to bottom right, #a00b6c, #2b008e); */
            background: linear-gradient(to bottom right, #59001c, #1f0065);
            border-radius: 6px;
            padding: 8px;
            text-align: center;
            /* transition: all .5s; */
        }

        .tiqu-box1,
        .tiqu-box2 {
            height: 403px;
        }

        /* 批量录入窗口中的标题 */
        .input-box h3,
        .input-box2 h3 {
            margin: 7px auto 0;
            color: #eee;
        }

        .tiqu-box1 h3,
        .tiqu-box2 h3 {
            margin: 7px auto;
            color: #eee;
        }

        /* 标题下面的说明文字 */
        .input-box-shuoming,
        .input-box2-shuoming {
            font-size: 14px;
            color: #eee;
        }

        /* 批量录入窗口中标题下面的分割线 */
        /* .input-box-line {
            width: 100%;
            height: 2px;
            background-color: lightcoral;
            margin: 10px 0 0;
        } */

        .input-box-textarea,
        .input-box2-textarea,
        .tiqu-box1-textarea,
        .tiqu-box2-textarea {
            margin: 7px 0;
            width: 100%;
            height: 303px;
            color: #eee;
            /* border: 1px solid #a35b74; */
            border: none;
            background-color: rgba(255, 255, 255, 0.1);
            padding: 6px;
        }

        .mod {
            padding: 20px 10px;
            border: 1px dashed #ccc;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .mod h3 {
            font-size: 18px;
            margin-top: 20px;
        }
    </style>
    <link rel="shortcut icon" href="./images/logo.ico">
</head>

<body class="content_box">
    <div class="container">
        <div class="main-content">
            <!-- <h1>天使选择器</h1> -->
            <h1>
                <span class="blue">I</span>
                <span class="red">C</span>
                <span class="green">A</span>
                <span class="orange">N</span>
            </h1>
            <div class="top-line"></div>


            <!-- <div class="reset-page">
                <button style="width: 100px;" onclick="location.reload()">刷新页面</button>
            </div> -->

            <h3 style="text-align: center;margin: 12px 0 16px;" class="box-good-number">
                当前幸运数字:<span class="goodNumber"></span>
            </h3>
            <div class="today mod" style="padding: 10px;">
                <!-- &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&& 幸运数模块 -->
                <script>
                    // 获取需要填入随机数的节点
                    let goodNumber = document.querySelector('.goodNumber');
                    // 自定义随机数的范围为 [1, 35]
                    // 获取 [1, 35] 范围内的乱序数组
                    let goodArr = randomNumberToArr(1, 80);
                    console.log('&&&&&&&&&&&&&&&&&& 随机生成幸运数字');
                    // 打印幸运数组
                    console.log('幸运数组[1-35]：', goodArr);
                    // 随机获取 [0, 34] 之间的一个索引值，用于生成幸运数
                    let goodIndex = getRandomNumber(0, 79);
                    // 打印索引值
                    console.log('索引值：' + goodIndex);
                    // 根据索引获取幸运数
                    console.log('幸运数字：', goodArr[goodIndex]);
                    // 将幸运数字填入页面
                    goodNumber.innerHTML = goodArr[goodIndex] < 10 ? '0' + goodArr[goodIndex] : goodArr[goodIndex];
                    console.log('&&&&&&&&&&&&&&&&&& 随机生成幸运数字');
                </script>

                <!-- &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&& 日期模块：年月日、时分秒 -->
                <h4 style="text-align: center;" class="date">
                    日期 :
                    <input type="text" maxlength="4" class="maxlength-four"> 年
                    <input type="text" maxlength="2"> 月
                    <input type="text" maxlength="2"> 日
                </h4>
                <h4 style="text-align: center;" class="time">
                    时间 :
                    <input type="text" maxlength="2" class="maxlength-four"> 时
                    <input type="text" maxlength="2"> 分
                    <input type="text" maxlength="2"> 秒
                </h4>
                <script>
                    // 获取日期盒子中所有的 input 框
                    let myDateInputs = document.querySelectorAll('.date input');
                    // 获取当前时间
                    let date = new Date();
                    // console.log(date);
                    // 获取年月日
                    let year = date.getFullYear();
                    // console.log(year);
                    let month = date.getMonth() + 1;
                    month = month < 10 ? '0' + month : month;
                    // console.log(month);
                    let day = date.getDate();
                    day = day < 10 ? '0' + day : day;
                    // console.log(day);
                    // 将日期盒子中所有的 input 框设为不可用
                    for (let i = 0; i < myDateInputs.length; i++) {
                        myDateInputs[i].disabled = true;
                    }
                    // 将年月日填入日期盒子中对应的 input 框
                    myDateInputs[0].value = year;
                    myDateInputs[1].value = month;
                    myDateInputs[2].value = day;


                    // 获取时间盒子中所有的 input 框
                    let myTimeInputs = document.querySelectorAll('.time input');
                    // 获取时分秒
                    let hours = date.getHours();
                    hours = hours < 10 ? '0' + hours : hours;
                    // console.log(hours);
                    let minutes = date.getMinutes();
                    minutes = minutes < 10 ? '0' + minutes : minutes;
                    // console.log(minutes);
                    let seconds = date.getSeconds();
                    seconds = seconds < 10 ? '0' + seconds : seconds;
                    // console.log(seconds);
                    // 将时间盒子中所有的 input 框设为不可用
                    for (let i = 0; i < myTimeInputs.length; i++) {
                        myTimeInputs[i].disabled = true;
                    }
                    // 将时分秒填入时间盒子中对应的 input 框
                    myTimeInputs[0].value = hours;
                    myTimeInputs[1].value = minutes;
                    myTimeInputs[2].value = seconds;
                    // 设置定时器
                    let timerForCurrentTime = setInterval(function () {
                        // 每秒都需要重新获取一下时间
                        date = new Date();
                        hours = date.getHours();
                        minutes = date.getMinutes();
                        seconds = date.getSeconds();
                        hours = hours < 10 ? '0' + hours : hours;
                        minutes = minutes < 10 ? '0' + minutes : minutes;
                        seconds = seconds < 10 ? '0' + seconds : seconds;
                        // 将重新获取的时分秒填入时间盒子中对应的 input 框
                        myTimeInputs[0].value = hours;
                        myTimeInputs[1].value = minutes;
                        myTimeInputs[2].value = seconds;
                    }, 1000);
                </script>
            </div>


            <!-- &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&& 随机数模块 -->
            <h3 style="color:#eee">随机数</h3>
            <div class="mod">
                <div class="random-box1">
                    <!-- <h3 style="color:#ec1616">随机数1</h3> -->
                    <!-- <h3 style="color:#bfba86">随机数1</h3> -->
                    <!-- <h3 style="color:#eee">随机数1</h3> -->
                    <!-- <h3 style="color:#FFF5E1">随机数1</h3> -->

                    <!-- <h4 style="text-align: center;margin-bottom: 20px;color:#e82424" class="randoms"> -->
                    <h4 style="text-align: center;margin-bottom: 6px;color:#eee" class="randoms">
                        <span style="color:#eee">范围[-999,999]&nbsp; : &nbsp;</span>
                        <input type="text" class="min" value="1" maxlength="4" style="width: 40px;">
                        &nbsp;~&nbsp;
                        <input type="text" class="max" value="35" maxlength="3" style="width: 40px;">
                        <br>
                        <button class="getRandom" style="width: 60px;">生成</button>
                        ->
                        <input type="text" class="randomNum" value="" style="width: 50px;">
                    </h4>
                    <script>
                        let getRandom = document.querySelector('.getRandom');
                        let randomNum = document.querySelector('.randomNum');
                        let min = document.querySelector('.min');
                        let max = document.querySelector('.max');
                        randomNum.disabled = true;
                        min.disabled = false;
                        max.disabled = false;

                        min.addEventListener('keydown', function (e) {
                            if (e.key === 'Enter') {
                                max.focus();
                            }
                            if (e.key === 'ArrowLeft') {
                                return false;
                            }
                            if (e.key === 'ArrowRight') {
                                max.focus();
                            }
                        });
                        max.addEventListener('keydown', function (e) {
                            if (e.key === 'Enter') {
                                this.blur();
                                return false;
                            }
                            if (e.key === 'ArrowLeft') {
                                min.focus();
                            }
                            if (e.key === 'ArrowRight') {
                                return false;
                            }
                        });

                        // 点击按钮生成随机数
                        getRandom.addEventListener('click', function () {
                            if (!isIntegerStringPositive(min.value) || !isIntegerStringPositive(max.value)) {
                                alert('请输入正整数');
                                return false;
                            }
                            if (parseInt(min.value) > parseInt(max.value)) {
                                alert('请输入正确的范围');
                                return false;
                            }
                            if (parseInt(max.value) > 999 || parseInt(min.value) < -999) {
                                alert('请输入正确的范围[-999, 999]');
                                return false;
                            }
                            this.disabled = true;
                            min.disabled = true;
                            max.disabled = true;
                            let minNum = parseInt(min.value);
                            let maxNum = parseInt(max.value);
                            let randomArr = randomNumberToArr(minNum, maxNum)

                            let index = getRandomNumber(0, maxNum - minNum)

                            new Promise(function (resolve, reject) {
                                // 自定义结束时间
                                let time = getRandomNumber(10, 20);
                                time *= 50;
                                // console.log(time);
                                let timer = setInterval(function () {
                                    index = getRandomNumber(0, maxNum - minNum);
                                    // if(randomArr[index] < 10&&randomArr[index]>0){
                                    //     randomNum.value =  '0' + randomArr[index]
                                    // }else{
                                    //     randomNum.value = randomArr[index];
                                    // }
                                    randomNum.value = randomArr[index];
                                    let tt = setTimeout(function () {
                                        clearInterval(timer);
                                        clearTimeout(tt);
                                        resolve(index);
                                    }, time);
                                }, 50)
                            }).then(function (v) {
                                console.log('&&&&&&&&&&&& 生成任意范围内的随机数');
                                console.log('随机数[' + minNum + ', ' + maxNum + ']系列：')
                                console.log('随机数数组：', randomArr)
                                console.log('随机数索引：', v);
                                console.log('随机数：', randomArr[v]);
                                getRandom.disabled = false;
                                min.disabled = false;
                                max.disabled = false;
                                console.log('&&&&&&&&&&&& 生成任意范围内的随机数');
                            });
                        });
                        // 进入页面就会生成一个随机数
                        getRandom.click();
                    </script>
                </div>
                <div class="random-box2">
                    <!-- <h3 style="color:#eee;">随机数2</h3> -->
                    <h4 style="text-align: center;margin-bottom: 0px;color:#eee" class="randoms2">
                        <span style="color:#eee">范围[-999,999]&nbsp; : &nbsp;</span>
                        <input type="text" class="min2" value="1" maxlength="4" style="width: 40px;">
                        &nbsp;~&nbsp;
                        <input type="text" class="max2" value="12" maxlength="3" style="width: 40px;">
                        <br>
                        <button class="getRandom2" style="width: 60px;">生成</button>
                        ->
                        <input type="text" class="randomNum2" value="" style="width: 50px;">
                    </h4>
                    <script>
                        let getRandom2 = document.querySelector('.getRandom2');
                        let randomNum2 = document.querySelector('.randomNum2');
                        let min2 = document.querySelector('.min2');
                        let max2 = document.querySelector('.max2');
                        randomNum2.disabled = true;
                        min2.disabled = false;
                        max2.disabled = false;

                        min2.addEventListener('keydown', function (e) {
                            if (e.key === 'Enter') {
                                max2.focus();
                            }
                            if (e.key === 'ArrowLeft') {
                                return false;
                            }
                            if (e.key === 'ArrowRight') {
                                max2.focus();
                            }
                        });
                        max2.addEventListener('keydown', function (e) {
                            if (e.key === 'Enter') {
                                this.blur();
                                return false;
                            }
                            if (e.key === 'ArrowLeft') {
                                min2.focus();
                            }
                            if (e.key === 'ArrowRight') {
                                return false;
                            }
                        });

                        // 点击按钮生成随机数
                        getRandom2.addEventListener('click', function () {
                            if (!isIntegerStringPositive(min2.value) || !isIntegerStringPositive(max2.value)) {
                                alert('请输入正整数');
                                return false;
                            }
                            if (parseInt(min2.value) > parseInt(max2.value)) {
                                alert('请输入正确的范围');
                                return false;
                            }
                            if (parseInt(max2.value) > 999 || parseInt(min2.value) < -999) {
                                alert('请输入正确的范围[-999, 999]');
                                return false;
                            }
                            this.disabled = true;
                            min2.disabled = true;
                            max2.disabled = true;
                            let minNum = parseInt(min2.value);
                            let maxNum = parseInt(max2.value);
                            let randomArr = randomNumberToArr(minNum, maxNum)

                            let index = getRandomNumber(0, maxNum - minNum)

                            new Promise(function (resolve, reject) {
                                // 自定义结束时间
                                let time = getRandomNumber(10, 20);
                                time *= 50;
                                // console.log(time);
                                let timer = setInterval(function () {
                                    index = getRandomNumber(0, maxNum - minNum);
                                    // if(randomArr[index] < 10&&randomArr[index]>0){
                                    //     randomNum.value =  '0' + randomArr[index]
                                    // }else{
                                    //     randomNum.value = randomArr[index];
                                    // }
                                    randomNum2.value = randomArr[index];
                                    let tt = setTimeout(function () {
                                        clearInterval(timer);
                                        clearTimeout(tt);
                                        resolve(index);
                                    }, time);
                                }, 50)
                            }).then(function (v) {
                                console.log('&&&&&&&&&&&& 生成任意范围内的随机数');
                                console.log('随机数[' + minNum + ', ' + maxNum + ']系列：')
                                console.log('随机数数组：', randomArr)
                                console.log('随机数索引：', v);
                                console.log('随机数：', randomArr[v]);
                                getRandom2.disabled = false;
                                min2.disabled = false;
                                max2.disabled = false;
                                console.log('&&&&&&&&&&&& 生成任意范围内的随机数');
                            });
                        });
                        // 进入页面就会生成一个随机数
                        getRandom2.click();
                    </script>
                </div>
            </div>




            <h3 style="color:#eee">抉择利器</h3>
            <div class="mod">
                <div class="xuan1">
                    <h3 style="color:#eee;margin-top: 0px;">标题1(选填)</h3>
                    <div class="question">
                        <input type="text" name="" id="" value="" maxlength="18" placeholder="限18个字">
                    </div>
                    <h3 style="color:#eee;">内容1(必填)</h3>
                    <div class="answers">
                        <div class="btn-add">
                            <button>追加</button>
                            <button style="width: 90px;" class="piliang-btn1">批量录入</button>
                            <button style="width: 60px;" class="tiqu-btn1">提取</button>
                            <button class="qingkong">清空</button>
                        </div>
                        <ul>
                            <li style="margin-right: 0px;">
                                <input type="text" name="" id="" value="" maxlength="4" placeholder="限4个字">
                                <!-- <button>删除</button> -->
                            </li>
                        </ul>
                    </div>
                    <script>
                        /*
                            增加本地存储功能
                        */
                        // 选填1
                        let xuanInput1 = document.querySelector('.question input');
                        xuanInput1.value = localStorage.getItem('xuan1') || '';
                        xuanInput1.addEventListener('blur', function () {
                            localStorage.setItem('xuan1', this.value);
                        });
                    </script>
                </div>

                <div class="xuan2">
                    <h3 style="color:#eee;">标题2(选填)</h3>
                    <div class="question2">
                        <input type="text" name="" id="" value="" maxlength="18" placeholder="限18个字">
                    </div>
                    <h3 style="color:#eee;">内容2(必填)</h3>
                    <div class="answers2">
                        <div class="btn-add2">
                            <button>追加</button>
                            <button style="width: 90px;" class="piliang-btn2">批量录入</button>
                            <button style="width: 60px;" class="tiqu-btn2">提取</button>
                            <button class="qingkong2">清空</button>
                        </div>
                        <ul>
                            <li style="margin-right: 0px;">
                                <input type="text" name="" id="" value="" maxlength="4" placeholder="限4个字">
                                <!-- <button>删除</button> -->
                            </li>
                        </ul>
                    </div>
                    <script>
                        /*
                            增加本地存储功能
                        */
                        // 选填2
                        let xuanInput2 = document.querySelector('.question2 input');
                        xuanInput2.value = localStorage.getItem('xuan2') || '';
                        xuanInput2.addEventListener('blur', function () {
                            localStorage.setItem('xuan2', this.value);
                        });
                    </script>
                </div>
            </div>



            <!-- 页面遮罩层 -->
            <div class="page-mask"></div>

            <!-- 必填1 批量录入窗口 -->
            <div class="input-box">
                <!-- 标题 -->
                <h3>批量录入内容1</h3>
                <!-- 标题下面的说明文字 -->
                <span class="input-box-shuoming">(可从Excel中粘入或统一使用空格隔开)</span>
                <!-- 分割线 -->
                <!-- <div class="input-box-line"></div> -->
                <!-- 录入框 -->
                <textarea name="" id="" cols="" rows="" class="input-box-textarea content_box2"></textarea>
                <!-- 追加录入按钮 -->
                <button class="input-box-btn-add">追加录入</button>
                <!-- 重新录入按钮 -->
                <button class="input-box-btn-replace">重新录入</button>
                <!-- 清空内容按钮 -->
                <button class="input-box-btn-clear">清空内容</button>
                <!-- 关闭窗口按钮 -->
                <button class="input-box-btn-close">关闭窗口</button>
            </div>

            <!-- 必填2 批量录入窗口 -->
            <div class="input-box2">
                <!-- 标题 -->
                <h3>批量录入内容2</h3>
                <!-- 标题下面的说明文字 -->
                <span class="input-box2-shuoming">(可从Excel中粘入或统一使用空格隔开)</span>
                <!-- 分割线 -->
                <!-- <div class="input-box2-line"></div> -->
                <!-- 录入框 -->
                <textarea name="" id="" cols="" rows="" class="input-box2-textarea content_box2"></textarea>
                <!-- 追加录入按钮 -->
                <button class="input-box2-btn-add">追加录入</button>
                <!-- 重新录入按钮 -->
                <button class="input-box2-btn-replace">重新录入</button>
                <!-- 清空内容按钮 -->
                <button class="input-box2-btn-clear">清空内容</button>
                <!-- 关闭窗口按钮 -->
                <button class="input-box2-btn-close">关闭窗口</button>
            </div>


            <!-- 必填1 提取窗口 -->
            <div class="tiqu-box1">
                <!-- 标题 -->
                <h3>内容1汇总</h3>
                <!-- 分割线 -->
                <!-- <div class="input-box-line"></div> -->
                <!-- 录入框 -->
                <textarea name="" id="" cols="" rows="" class="tiqu-box1-textarea content_box2"></textarea>
                <!-- 关闭窗口按钮 -->
                <button class="tiqu-box1-btn-clear">清空内容</button>
                <button class="tiqu-box1-btn-close">关闭窗口</button>
            </div>

            <!-- 必填2 提取窗口 -->
            <div class="tiqu-box2">
                <!-- 标题 -->
                <h3>内容2汇总</h3>
                <!-- 分割线 -->
                <!-- <div class="input-box-line"></div> -->
                <!-- 录入框 -->
                <textarea name="" id="" cols="" rows="" class="tiqu-box2-textarea content_box2"></textarea>
                <!-- 关闭窗口按钮 -->
                <button class="tiqu-box2-btn-clear">清空内容</button>
                <button class="tiqu-box2-btn-close">关闭窗口</button>
            </div>



            <h3 style="color:#eee;">结果生成区域</h3>
            <!-- <h3 style="color:#3679e3;">天使的建议(优选)</h3> -->
            <div class="btn-clear">
                <!-- <button style="margin-top: 12px;width: 60px;" onclick="location.reload()">重置</button> -->
                <button style="margin-top: 12px;width: 170px;">清空所有生成的内容</button>
            </div>
            <div class="btn-choose">
                <button>从内容1中生成</button>
                <button>从内容2中生成</button>
            </div>

            <div class="tianshi content_box3">
                <div class="content">
                    <!-- <dl>
                        <dt>吃什么</dt>
                        <dd>水果</dd>
                    </dl>
                    <dl>
                        <dt>吃什么</dt>
                        <dd>水果</dd>
                    </dl> -->
                </div>
            </div>
            <div class="write">
                <h3 class="red" style="color:#eee;">草稿</h3>
                <textarea name="" id="" cols="30" rows="10" class="content_box3"></textarea>
            </div>
            <script>
                /*
                    增加本地存储功能
                */
                // 草稿
                let caogao = document.querySelector('.write textarea');
                caogao.value = localStorage.getItem('caogao') || '';
                caogao.addEventListener('blur', function () {
                    localStorage.setItem('caogao', this.value);
                });
                setInterval(() => {
                    localStorage.setItem('caogao', caogao.value);
                }, 10000);
            </script>
        </div>
    </div>

    <script>
        /*
            让所有的 input 点击后清空内容
        */
        let inputs = document.querySelectorAll('.xuan1 input');
        let inputs2 = document.querySelectorAll('.xuan2 input');
        // for (let i = 0; i < inputs.length; i++) {
        //     inputs[i].addEventListener('click', function () {
        //         this.value = '';
        //     });
        // }


        /*
            点击 添加 按钮，在 "心中的答案" 区域添加一个输入框和一个删除按钮
        */
        // 获取添加按钮
        let addBtn = document.querySelectorAll('.btn-add button')[0];
        let addBtn2 = document.querySelectorAll('.btn-add2 button')[0];
        let qingkong = document.querySelectorAll('.btn-add button')[3];
        let qingkong2 = document.querySelectorAll('.btn-add2 button')[3];
        // 获取 ul
        let ul = document.querySelector('.answers ul');
        let ul2 = document.querySelector('.answers2 ul');
        // 事件处理函数
        let handle = function (e) {
            if (e.key === 'Enter') {
                addBtn.click();
            }
        };
        let handle2 = function (e) {
            if (e.key === 'Enter') {
                addBtn2.click();
            }
        };


        function fangxiang(ul) {
            // 上下键功能
            for (let i = 0; i < ul.children.length; i++) {
                ul.children[i].children[0].addEventListener('keydown', function (e) {
                    if (e.key === 'ArrowUp') {
                        if (ul.children.length === 1) return;
                        if (i === 0) return;
                        ul.children[i - 1].children[0].focus();
                    }
                    if (e.key === 'ArrowDown') {
                        if (i >= ul.children.length - 1) return;
                        ul.children[i + 1].children[0].focus();
                    }
                    if (e.key === 'ArrowLeft') {
                        if (ul.children.length === 1) return;
                        if (i === 0) return;
                        ul.children[i - 1].children[0].focus();
                    }
                    if (e.key === 'ArrowRight') {
                        if (i >= ul.children.length - 1) return;
                        ul.children[i + 1].children[0].focus();
                    }
                });
            }
        }


        // let handle1 = function (e) {
        //     if (e.key === 'Enter') {
        //         for (let i = 0; i < ul.children.length; i++) {
        //             ul.children[i].children[0].addEventListener('keydown', handle2);
        //         }
        //         ul.children[ul.children.length - 1].children[0].focus();
        //         console.log(ul.children.length);
        //         // 清除其它 input 中的回车事件，给最后一个 input 添加回车事件
        //         for (let i = 0; i < ul.children.length; i++) {
        //             ul.children[i].children[0].removeEventListener('keydown', handle);
        //         }
        //         ul.children[ul.children.length - 1].children[0].addEventListener('keydown', handle2);
        //         // for (let i = 0; i < ul.children.length; i++) {
        //         //     ul.children[i].children[0].addEventListener('keydown', handle);
        //         // }
        //         inputs = document.querySelectorAll('input');
        //         // for (let i = 0; i < inputs.length; i++) {
        //         //     inputs[i].addEventListener('click', function () {
        //         //         this.value = '';
        //         //     });
        //         // }
        //         for (let i = 0; i < ul.children.length; i++) {
        //             ul.children[i].children[0].addEventListener('keydown', handle3);
        //         }
        //     }
        // }

        // let handle2 = function (e) {

        // }

        // let handle3 = function (e) {}

        // 给第一个 input 添加回车事件

        let xuan1arr = JSON.parse(localStorage.getItem('xuan1arr')) || [];
        ul.children[0].children[0].value = xuan1arr.length === 0 ? '' : xuan1arr[0];
        let xuan2arr = JSON.parse(localStorage.getItem('xuan2arr')) || [];
        ul2.children[0].children[0].value = xuan2arr.length === 0 ? '' : xuan2arr[0];

        qingkong.addEventListener('click', function () {
            ul.innerHTML = `
                <li style="margin-right: 0px;">
                    <input type="text" name="" id="" value="" maxlength="4" placeholder="限4个字">
                    <!-- <button>删除</button> -->
                </li>
            `;
            localStorage.removeItem('xuan1arr');
            xuan1arr = [];
            ul.children[0].children[0].addEventListener('keydown', handle);

            ul.children[0].children[0].addEventListener('blur', function () {
                // if (this.value != '') {
                xuan1arr[0] = this.value;
                // }
                localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));
            });
            ul.children[0].children[0].focus();
        });

        qingkong2.addEventListener('click', function () {
            ul2.innerHTML = `
                <li style="margin-right: 0px;">
                    <input type="text" name="" id="" value="" maxlength="4" placeholder="限4个字">
                    <!-- <button>删除</button> -->
                </li>
            `;
            localStorage.removeItem('xuan2arr');
            xuan2arr = [];
            ul2.children[0].children[0].addEventListener('keydown', handle2);

            ul2.children[0].children[0].addEventListener('blur', function () {
                // if (this.value != '') {
                xuan2arr[0] = this.value;
                // }
                localStorage.setItem('xuan2arr', JSON.stringify(xuan2arr));
            });
            ul2.children[0].children[0].focus();
        });


        // ul.children[0].children[0].addEventListener('keydown', handle1);
        // ul.children[0].children[0].addEventListener('keydown', handle2);
        // ul.children[0].children[0].addEventListener('keydown', handle3);
        ul.children[0].children[0].addEventListener('blur', function () {
            // if (this.value != '') {
            xuan1arr[0] = this.value;
            // }
            localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));
        });
        ul2.children[0].children[0].addEventListener('blur', function () {
            // if (this.value != '') {
            xuan2arr[0] = this.value;
            // }
            localStorage.setItem('xuan2arr', JSON.stringify(xuan2arr));
        });

        if (xuan1arr.length != 0) {
            for (let i = 1; i < xuan1arr.length; i++) {
                // 创建 li
                let li = document.createElement('li');
                // li.innerHTML = `
                //     <input type="text" name="" id="" value="" maxlength="3" placeholder="限3字">
                // `;
                let input = document.createElement('input');
                input.type = 'text';
                input.maxLength = '4';
                input.placeholder = '限4个字';
                input.addEventListener('blur', function () {
                    for (let i = 0; i < ul.children.length; i++) {
                        // if (ul.children[i].children[0].value != '') {
                        xuan1arr[i] = ul.children[i].children[0].value;
                        // }
                    }
                    localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));
                });
                li.appendChild(input);
                // 添加 li
                ul.appendChild(li);
                ul.children[i].children[0].value = xuan1arr[i];
            }

            // 上下键功能
            fangxiang(ul);

            // 获取删除按钮
            for (let i = 0; i < ul.children.length; i++) {
                ul.children[i].children[0].addEventListener('keydown', function (e) {
                    if (this.value === '') {
                        if (e.key === 'Delete' || e.key === 'Backspace') {
                            if (ul.children.length === 1) {
                                let tim = setTimeout(function () {
                                    ul.children[0].children[0].focus();
                                    clearTimeout(tim);
                                }, 0);
                                return;
                            }
                            // 删除父元素 li
                            this.parentNode.remove();

                            // console.log('删除后li数量', ul.children.length);
                            for (let i = 0; i < ul.children.length; i++) {
                                ul.children[i].children[0].removeEventListener('keydown', handle);
                            }
                            ul.children[ul.children.length - 1].children[0].addEventListener('keydown', handle);
                            xuan1arr = [];
                            for (let i = 0; i < ul.children.length; i++) {
                                // if (ul.children[i].children[0].value != '') {
                                xuan1arr[i] = ul.children[i].children[0].value;
                                // }
                            }
                            // console.log(xuan1arr);
                            localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));


                            // 上下键功能
                            fangxiang(ul);

                        }
                    }
                });
            }

            // input 的 focus 事件
            // 主题1中所有 input 的 focus 事件 (部分情景下 blur 事件被占用)
            // input 每次获取焦点后，重新为主题1中所有的 input 添加键盘删除事件
            for (let i = 0; i < ul.children.length; i++) {
                ul.children[i].children[0].addEventListener('focus', function (e) {
                    for (let i = 0; i < ul.children.length; i++) {
                        ul.children[i].children[0].addEventListener('keydown', function (e) {

                            if (e.key === 'Delete' || e.key === 'Backspace') {
                                if (this.value === '') {
                                    if (ul.children.length === 1) {
                                        let tim = setTimeout(function () {
                                            ul.children[0].children[0].focus();
                                            clearTimeout(tim);
                                        }, 0);
                                        return;
                                    }

                                    // 删除父元素 li
                                    this.parentNode.remove();

                                    if (i > 0 && ul.children[i - 1]) {
                                        let t1 = setTimeout(() => {
                                            ul.children[i - 1].children[0].focus();
                                            clearTimeout(t1);
                                        }, 0);
                                    }


                                    if (i <= 0 || !ul.children[i - 1]) {
                                        let t2 = setTimeout(() => {
                                            ul.children[0].children[0].focus();
                                            clearTimeout(t2);
                                        }, 0);
                                    }

                                    // console.log('删除后li数量', ul.children.length);
                                    for (let i = 0; i < ul.children.length; i++) {
                                        ul.children[i].children[0].removeEventListener('keydown', handle);
                                    }
                                    ul.children[ul.children.length - 1].children[0].addEventListener('keydown', handle);

                                    xuan1arr = [];
                                    for (let i = 0; i < ul.children.length; i++) {
                                        // if (ul.children[i].children[0].value != '') {
                                        xuan1arr[i] = ul.children[i].children[0].value;
                                        // }
                                    }
                                    localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));

                                    // 上下键功能
                                    fangxiang(ul);
                                } else {
                                    let t3 = setTimeout(() => {
                                        this.value = '';
                                        clearTimeout(t3);
                                    }, 0);
                                }
                            }
                        });
                    }

                });
            }

        }
        if (xuan2arr.length != 0) {
            for (let i = 1; i < xuan2arr.length; i++) {
                // 创建 li
                let li = document.createElement('li');
                // li.innerHTML = `
                //     <input type="text" name="" id="" value="" maxlength="3" placeholder="限3字">
                // `;
                let input = document.createElement('input');
                input.type = 'text';
                input.maxLength = '4';
                input.placeholder = '限4个字';
                input.addEventListener('blur', function () {
                    for (let i = 0; i < ul2.children.length; i++) {
                        // if (ul2.children[i].children[0].value != '') {
                        xuan2arr[i] = ul2.children[i].children[0].value;
                        // }
                    }
                    localStorage.setItem('xuan2arr', JSON.stringify(xuan2arr));
                });
                li.appendChild(input);
                // 添加 li
                ul2.appendChild(li);
                ul2.children[i].children[0].value = xuan2arr[i];
            }

            // 上下键功能
            fangxiang(ul2);

            // 获取删除按钮
            for (let i = 0; i < ul2.children.length; i++) {
                ul2.children[i].children[0].addEventListener('keydown', function (e) {
                    if (this.value === '') {
                        if (e.key === 'Delete' || e.key === 'Backspace') {
                            if (ul2.children.length === 1) {
                                let tim = setTimeout(function () {
                                    ul2.children[0].children[0].focus();
                                    clearTimeout(tim);
                                }, 0);
                                return;
                            }
                            // 删除父元素 li
                            this.parentNode.remove();

                            // console.log('删除后li2数量', ul2.children.length);
                            for (let i = 0; i < ul2.children.length; i++) {
                                ul2.children[i].children[0].removeEventListener('keydown', handle2);
                            }
                            ul2.children[ul2.children.length - 1].children[0].addEventListener('keydown', handle2);
                            xuan2arr = [];
                            for (let i = 0; i < ul2.children.length; i++) {
                                // if (ul2.children[i].children[0].value != '') {
                                xuan2arr[i] = ul2.children[i].children[0].value;
                                // }
                            }
                            // console.log(xuan2arr);
                            localStorage.setItem('xuan2arr', JSON.stringify(xuan2arr));


                            // 上下键功能
                            fangxiang(ul2);
                        }
                    }
                });
            }

            // input 的 focus 事件
            // 主题1中所有 input 的 focus 事件 (部分情景下 blur 事件被占用)
            // input 每次获取焦点后，重新为主题1中所有的 input 添加键盘删除事件
            for (let i = 0; i < ul2.children.length; i++) {
                ul2.children[i].children[0].addEventListener('focus', function (e) {
                    for (let i = 0; i < ul2.children.length; i++) {
                        ul2.children[i].children[0].addEventListener('keydown', function (e) {

                            if (e.key === 'Delete' || e.key === 'Backspace') {
                                if (this.value === '') {
                                    if (ul2.children.length === 1) {
                                        let tim = setTimeout(function () {
                                            ul2.children[0].children[0].focus();
                                            clearTimeout(tim);
                                        }, 0);
                                        return;
                                    }

                                    // 删除父元素 li
                                    this.parentNode.remove();

                                    if (i > 0 && ul2.children[i - 1]) {
                                        let t1 = setTimeout(() => {
                                            ul2.children[i - 1].children[0].focus();
                                            clearTimeout(t1);
                                        }, 0);
                                    }


                                    if (i <= 0 || !ul2.children[i - 1]) {
                                        let t2 = setTimeout(() => {
                                            ul2.children[0].children[0].focus();
                                            clearTimeout(t2);
                                        }, 0);
                                    }

                                    // console.log('删除后li2数量', ul2.children.length);
                                    for (let i = 0; i < ul2.children.length; i++) {
                                        ul2.children[i].children[0].removeEventListener('keydown', handle2);
                                    }
                                    ul2.children[ul2.children.length - 1].children[0].addEventListener('keydown', handle2);

                                    xuan2arr = [];
                                    for (let i = 0; i < ul2.children.length; i++) {
                                        // if (ul.children[i].children[0].value != '') {
                                        xuan2arr[i] = ul2.children[i].children[0].value;
                                        // }
                                    }
                                    localStorage.setItem('xuan2arr', JSON.stringify(xuan2arr));

                                    // 上下键功能
                                    fangxiang(ul2);
                                } else {
                                    let t3 = setTimeout(() => {
                                        this.value = '';
                                        clearTimeout(t3);
                                    }, 0);
                                }
                            }
                        });
                    }

                });
            }

        }


        if (xuan1arr.length == 0) {
            ul.children[0].children[0].addEventListener('keydown', handle);
        } else {
            ul.children[xuan1arr.length - 1].children[0].addEventListener('keydown', handle);
        }
        if (xuan2arr.length == 0) {
            ul2.children[0].children[0].addEventListener('keydown', handle2);
        } else {
            ul2.children[xuan2arr.length - 1].children[0].addEventListener('keydown', handle2);
        }


        // 点击添加按钮
        addBtn.addEventListener('click', function () {
            // 创建 li
            let li = document.createElement('li');
            // li.innerHTML = `
            //     <input type="text" name="" id="" value="" maxlength="3" placeholder="限3字">
            // `;
            let input = document.createElement('input');
            input.type = 'text';
            input.maxLength = '4';
            input.placeholder = '限4个字';
            input.addEventListener('blur', function () {
                xuan1arr = [];
                for (let i = 0; i < ul.children.length; i++) {
                    // if (ul.children[i].children[0].value != '') {
                    xuan1arr[i] = ul.children[i].children[0].value;
                    // }
                }
                localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));
            });
            li.appendChild(input);
            // 添加 li
            ul.appendChild(li);
            ul.children[ul.children.length - 1].children[0].focus();
            inputs = document.querySelectorAll('.xuan1 input');

            for (let i = 0; i < ul.children.length; i++) {
                ul.children[i].children[0].removeEventListener('keydown', handle);
            }
            ul.children[ul.children.length - 1].children[0].addEventListener('keydown', handle);

            // console.log('添加后li数量', ul.children.length);

            // for (let i = 0; i < ul.children.length; i++) {
            //     ul.children[i].children[0].addEventListener('keydown', function (e) {

            //     });
            // }

            // 获取删除按钮
            for (let i = 0; i < ul.children.length; i++) {
                ul.children[i].children[0].addEventListener('keydown', function (e) {

                    if (e.key === 'Delete' || e.key === 'Backspace') {
                        if (this.value === '') {
                            if (ul.children.length === 1) {
                                let tim = setTimeout(function () {
                                    ul.children[0].children[0].focus();
                                    clearTimeout(tim);
                                }, 0);
                                return;
                            }

                            // 删除父元素 li
                            this.parentNode.remove();

                            if (i > 0 && ul.children[i - 1]) {
                                let t1 = setTimeout(() => {
                                    ul.children[i - 1].children[0].focus();
                                    clearTimeout(t1);
                                }, 0);
                            }


                            if (i <= 0 || !ul.children[i - 1]) {
                                let t2 = setTimeout(() => {
                                    ul.children[0].children[0].focus();
                                    clearTimeout(t2);
                                }, 0);
                            }

                            // console.log('删除后li数量', ul.children.length);
                            for (let i = 0; i < ul.children.length; i++) {
                                ul.children[i].children[0].removeEventListener('keydown', handle);
                            }
                            ul.children[ul.children.length - 1].children[0].addEventListener('keydown', handle);

                            xuan1arr = [];
                            for (let i = 0; i < ul.children.length; i++) {
                                // if (ul.children[i].children[0].value != '') {
                                xuan1arr[i] = ul.children[i].children[0].value;
                                // }
                            }
                            localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));


                            // if (ul.children.length === 1) return;
                            // if (i === 0) return;
                            // let ti = setTimeout(()=> {
                            //     i--;
                            //     console.log('删除后i', i);
                            //     // if (i === 0) {
                            //     //     ul.children[0].children[0].focus();
                            //     //     return;
                            //     // }

                            //     if (i <= 0) {
                            //         ul.children[0].children[0].focus();
                            //         clearTimeout(ti);
                            //         return;
                            //     }
                            //     let tempIndex = ul.children[i].getAttribute('tempIndex');
                            //     console.log('temoIndex', tempIndex);
                            //     ul.children[tempIndex].children[0].focus();
                            //     clearTimeout(ti);
                            // }, 0);
                            // console.log('删除后i', i);
                            // if (i === 0) {
                            //     ul.children[0].children[0].focus();
                            //     return;
                            // }
                            // ul.children[i - 1].children[0].focus();

                            // 上下键功能
                            fangxiang(ul);
                        } else {
                            let t3 = setTimeout(() => {
                                this.value = '';
                                clearTimeout(t3);
                            }, 0);
                        }
                    }
                });
            }

            // 上下键功能
            fangxiang(ul);

            // 将所有的必填1存入本地存储
            // for (let i = 0; i < ul.children.length; i++) {
            //     xuan1arr[i] = ul.children[i].children[0].value;
            // }
            // localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));

            // input 的 focus 事件
            // 主题1中所有 input 的 focus 事件 (部分情景下 blur 事件被占用)
            // input 每次获取焦点后，重新为主题1中所有的 input 添加键盘删除事件
            for (let i = 0; i < ul.children.length; i++) {
                ul.children[i].children[0].addEventListener('focus', function (e) {
                    for (let i = 0; i < ul.children.length; i++) {
                        ul.children[i].children[0].addEventListener('keydown', function (e) {

                            if (e.key === 'Delete' || e.key === 'Backspace') {
                                if (this.value === '') {
                                    if (ul.children.length === 1) {
                                        let tim = setTimeout(function () {
                                            ul.children[0].children[0].focus();
                                            clearTimeout(tim);
                                        }, 0);
                                        return;
                                    }

                                    // 删除父元素 li
                                    this.parentNode.remove();

                                    if (i > 0 && ul.children[i - 1]) {
                                        let t1 = setTimeout(() => {
                                            ul.children[i - 1].children[0].focus();
                                            clearTimeout(t1);
                                        }, 0);
                                    }


                                    if (i <= 0 || !ul.children[i - 1]) {
                                        let t2 = setTimeout(() => {
                                            ul.children[0].children[0].focus();
                                            clearTimeout(t2);
                                        }, 0);
                                    }

                                    // console.log('删除后li数量', ul.children.length);
                                    for (let i = 0; i < ul.children.length; i++) {
                                        ul.children[i].children[0].removeEventListener('keydown', handle);
                                    }
                                    ul.children[ul.children.length - 1].children[0].addEventListener('keydown', handle);

                                    xuan1arr = [];
                                    for (let i = 0; i < ul.children.length; i++) {
                                        // if (ul.children[i].children[0].value != '') {
                                        xuan1arr[i] = ul.children[i].children[0].value;
                                        // }
                                    }
                                    localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));

                                    // 上下键功能
                                    fangxiang(ul);
                                } else {
                                    let t3 = setTimeout(() => {
                                        this.value = '';
                                        clearTimeout(t3);
                                    }, 0);
                                }
                            }
                        });
                    }

                });
            }

        });

        addBtn2.addEventListener('click', function () {
            // 创建 li
            let li = document.createElement('li');
            // li.innerHTML = `
            //     <input type="text" name="" id="" value="" maxlength="3" placeholder="限3字">
            // `;
            let input = document.createElement('input');
            input.type = 'text';
            input.maxLength = '4';
            input.placeholder = '限4个字';
            input.addEventListener('blur', function () {
                for (let i = 0; i < ul2.children.length; i++) {
                    // if (ul2.children[i].children[0].value != '') {
                    xuan2arr[i] = ul2.children[i].children[0].value;
                    // }
                }
                localStorage.setItem('xuan2arr', JSON.stringify(xuan2arr));
            });
            li.appendChild(input);
            // 添加 li
            ul2.appendChild(li);
            ul2.children[ul2.children.length - 1].children[0].focus();
            inputs2 = document.querySelectorAll('.xuan2 input');

            for (let i = 0; i < ul2.children.length; i++) {
                ul2.children[i].children[0].removeEventListener('keydown', handle2);
            }
            ul2.children[ul2.children.length - 1].children[0].addEventListener('keydown', handle2);

            // console.log('添加后li2数量', ul2.children.length);

            // 获取删除按钮
            for (let i = 0; i < ul2.children.length; i++) {
                ul2.children[i].children[0].addEventListener('keydown', function (e) {
                    if (this.value === '') {
                        if (e.key === 'Delete' || e.key === 'Backspace') {
                            if (ul2.children.length === 1) {
                                let tim = setTimeout(function () {
                                    ul2.children[0].children[0].focus();
                                    clearTimeout(tim);
                                }, 0);
                                return;
                            }

                            // 删除父元素 li
                            this.parentNode.remove();

                            // console.log('删除后li2数量', ul2.children.length);
                            for (let i = 0; i < ul2.children.length; i++) {
                                ul2.children[i].children[0].removeEventListener('keydown', handle2);
                            }
                            ul2.children[ul2.children.length - 1].children[0].addEventListener('keydown', handle2);


                            xuan2arr = [];
                            for (let i = 0; i < ul2.children.length; i++) {
                                // if (ul2.children[i].children[0].value != '') {
                                xuan2arr[i] = ul2.children[i].children[0].value;
                                // }
                            }
                            localStorage.setItem('xuan2arr', JSON.stringify(xuan2arr));


                            // 上下键功能
                            fangxiang(ul2);

                            // let ti = setTimeout(function () {
                            //     console.log('删除后i2', i);
                            //     if (i === 0) {
                            //         ul2.children[0].children[0].focus();
                            //         return;
                            //     }
                            //     ul2.children[i - 1].children[0].focus();
                            //     clearTimeout(ti);
                            // }, 0);
                        }
                    }
                });
            }


            // 上下键功能
            fangxiang(ul2);


            // input 的 focus 事件
            // 主题1中所有 input 的 focus 事件 (部分情景下 blur 事件被占用)
            // input 每次获取焦点后，重新为主题1中所有的 input 添加键盘删除事件
            for (let i = 0; i < ul2.children.length; i++) {
                ul2.children[i].children[0].addEventListener('focus', function (e) {
                    for (let i = 0; i < ul2.children.length; i++) {
                        ul2.children[i].children[0].addEventListener('keydown', function (e) {

                            if (e.key === 'Delete' || e.key === 'Backspace') {
                                if (this.value === '') {
                                    if (ul2.children.length === 1) {
                                        let tim = setTimeout(function () {
                                            ul2.children[0].children[0].focus();
                                            clearTimeout(tim);
                                        }, 0);
                                        return;
                                    }

                                    // 删除父元素 li
                                    this.parentNode.remove();

                                    if (i > 0 && ul2.children[i - 1]) {
                                        let t1 = setTimeout(() => {
                                            ul2.children[i - 1].children[0].focus();
                                            clearTimeout(t1);
                                        }, 0);
                                    }


                                    if (i <= 0 || !ul2.children[i - 1]) {
                                        let t2 = setTimeout(() => {
                                            ul2.children[0].children[0].focus();
                                            clearTimeout(t2);
                                        }, 0);
                                    }

                                    // console.log('删除后li2数量', ul2.children.length);
                                    for (let i = 0; i < ul2.children.length; i++) {
                                        ul2.children[i].children[0].removeEventListener('keydown', handle2);
                                    }
                                    ul2.children[ul2.children.length - 1].children[0].addEventListener('keydown', handle2);

                                    xuan2arr = [];
                                    for (let i = 0; i < ul2.children.length; i++) {
                                        // if (ul.children[i].children[0].value != '') {
                                        xuan2arr[i] = ul2.children[i].children[0].value;
                                        // }
                                    }
                                    localStorage.setItem('xuan2arr', JSON.stringify(xuan2arr));

                                    // 上下键功能
                                    fangxiang(ul2);
                                } else {
                                    let t3 = setTimeout(() => {
                                        this.value = '';
                                        clearTimeout(t3);
                                    }, 0);
                                }
                            }
                        });
                    }

                });
            }

        });


        /*
            点击 删除 按钮，从 "心中的答案" 区域删除对应的答案
        */
        // 获取删除按钮
        // for (let i = 0; i < ul.children.length; i++) {
        //     ul.children[i].children[1].addEventListener('click', function () {
        //         // 删除父元素 li
        //         this.parentNode.remove();
        //         // 清除其它 input 中的回车事件，给最后一个 input 添加回车事件
        //         if (ul.children.length === 0) return;
        //         for (let i = 0; i < ul.children.length; i++) {
        //             ul.children[i].children[0].removeEventListener('keydown', handle);
        //         }
        //         ul.children[ul.children.length - 1].children[0].addEventListener('keydown', handle);
        //     });
        // }
        // 别忘了在新添加的 li 中给 删除 按钮添加点击事件



        /*
            点击 "寻求天使帮助" 按钮，从 "心中的答案" 区域随机选出一个答案
        */
        // 获取选择按钮 "寻求天使帮助"
        let chooseBtn = document.querySelectorAll('.btn-choose button')[0];
        let chooseBtn2 = document.querySelectorAll('.btn-choose button')[1];
        // 存储问题的数组
        let questionArr = JSON.parse(localStorage.getItem('questionArr')) || [];
        // console.log(questionArr);
        // let questionArr2 = [];
        let resArr = [];
        // 获取 "天使建议您" 区域
        let tianshi = document.querySelector('.tianshi .content');
        tianshi.innerHTML = localStorage.getItem('res') || '';
        // 获取 清空答案 按钮
        let clearBtn = document.querySelector('.btn-clear button');
        // 获取 重置 按钮
        // let chongzhi = document.querySelector('.reset-page button');
        // 获取所有的按钮
        let btns = document.querySelectorAll('.xuan1 button');
        let btns2 = document.querySelectorAll('.xuan2 button');


        // 点击选择按钮随机
        chooseBtn.addEventListener('click', function () {
            // 每次清除存储的问题数组后，都会删除本地存储中的 questionArr
            // 但该全局变量还是原来的值
            // 所以每次点击按钮时都要重新获取一次
            questionArr = JSON.parse(localStorage.getItem('questionArr')) || [];
            this.disabled = true;
            clearBtn.disabled = true;
            // chongzhi.disabled = true;
            if (ul.children.length === 0) {
                alert('请添加必填内容');
                this.disabled = false;
                clearBtn.disabled = false;
                // chongzhi.disabled = false;
                return;
            }
            if (ul.children.length === 1 && ul.children[0].children[0].value.trim() === '') {
                alert('请输入必填内容');
                this.disabled = false;
                clearBtn.disabled = false;
                // chongzhi.disabled = false;
                return;
            }
            for (let i = 0; i < ul.children.length; i++) {
                if (ul.children[i].children[0].value.trim() === '') {
                    alert('请补全必填内容');
                    this.disabled = false;
                    clearBtn.disabled = false;
                    // chongzhi.disabled = false;
                    return;
                }
            }
            // 可能出现后添加的输入框和按钮，需要重新获取一下
            inputs = document.querySelectorAll('.xuan1 input');
            btns = document.querySelectorAll('.xuan1 button');
            // 让所有的 inputs 不可用
            for (let i = 0; i < inputs.length; i++) {
                inputs[i].disabled = true;
            }
            // 让所有的按钮不可用
            for (let i = 0; i < btns.length; i++) {
                btns[i].disabled = true;
            }

            // 随机索引
            let randomNum = getRandomNumber(0, ul.children.length - 1);
            // 每 0.09 秒选出一个结果
            let smallTimer = setInterval(() => {
                // 随机数数组
                let temArr = randomNumberToArr(0, ul.children.length - 1);
                // 随机索引
                randomNum = getRandomNumber(0, ul.children.length - 1);
                // 对随机索引进行加工，更加随机
                randomNum = temArr[randomNum];
                // 让其它输入框不变色
                for (let i = 0; i < ul.children.length; i++) {
                    ul.children[i].children[0].style.backgroundColor = '';
                }
                let ssTimer = setTimeout(() => {
                    // 让当前输入框变色
                    ul.children[randomNum].children[0].style.backgroundColor = '#800B3E';
                    clearTimeout(ssTimer);
                }, 100);
            }, 90);
            // 3 秒后选出最终结果
            let bigTimer = setTimeout(() => {
                clearInterval(smallTimer);
                // 让其它输入框不变色
                for (let i = 0; i < ul.children.length; i++) {
                    ul.children[i].children[0].style.backgroundColor = '';
                }

                // 将问题添加到数组
                let question = '********** ' + document.querySelector('.question input').value + ' **********';
                if (document.querySelector('.question input').value.trim() === '') {
                    question = '********** 命1未录入的问题 **********';
                }
                let index = questionArr.indexOf(question);
                // 如果没有就添加
                if (index < 0) {
                    questionArr.push(question);
                    localStorage.setItem('questionArr', JSON.stringify(questionArr));
                }
                // console.log('index:', index);
                // console.log(questionArr);

                // 将答案添加到 "天使建议您" 区域
                // 如果问题未出现过，就添加，否则，就在对应的问题下添加答案即可
                if (index < 0 || tianshi.innerHTML === '') {
                    // 创建 dl
                    let dl = document.createElement('dl');
                    // 创建 dt
                    let dt = document.createElement('dt');
                    dt.innerHTML = question;
                    // 创建 dd
                    let dd = document.createElement('dd');
                    dd.innerHTML = ul.children[randomNum].children[0].value;
                    if (ul.children[randomNum].children[0].value.trim() === '') {
                        dd.innerHTML = '未录入的答案';
                    }
                    dl.appendChild(dt);
                    dl.appendChild(dd);
                    tianshi.appendChild(dl);
                    // console.log(2);
                    localStorage.setItem('res', tianshi.innerHTML);
                } else {// 创建 dd
                    let dd = document.createElement('dd');
                    dd.innerHTML = ul.children[randomNum].children[0].value;
                    if (ul.children[randomNum].children[0].value.trim() === '') {
                        dd.innerHTML = '未知答案';
                    }
                    tianshi.children[index].appendChild(dd);
                    // console.log(1);
                    localStorage.setItem('res', tianshi.innerHTML);
                }

                let ssTimer = setTimeout(() => {
                    // 让当前输入框变色
                    ul.children[randomNum].children[0].style.backgroundColor = '#800B3E';
                    clearTimeout(ssTimer);
                }, 100);

                // 让所有的 inputs 可用
                for (let i = 0; i < inputs.length; i++) {
                    inputs[i].disabled = false;
                }
                // 让所有的按钮可用
                for (let i = 0; i < btns.length; i++) {
                    btns[i].disabled = false;
                }
                this.disabled = false;
                clearBtn.disabled = false;
                // chongzhi.disabled = false;
                clearTimeout(bigTimer);
            }, 2700);
        });

        chooseBtn2.addEventListener('click', function () {
            // 每次清除存储的问题数组后，都会删除本地存储中的 questionArr
            // 但该全局变量还是原来的值
            // 所以每次点击按钮时都要重新获取一次
            questionArr = JSON.parse(localStorage.getItem('questionArr')) || [];
            this.disabled = true;
            clearBtn.disabled = true;
            // chongzhi.disabled = true;
            if (ul2.children.length === 0) {
                alert('请添加必填内容');
                this.disabled = false;
                clearBtn.disabled = false;
                // chongzhi.disabled = false;
                return;
            }
            if (ul2.children.length === 1 && ul2.children[0].children[0].value.trim() === '') {
                alert('请输入必填内容');
                this.disabled = false;
                clearBtn.disabled = false;
                // chongzhi.disabled = false;
                return;
            }
            for (let i = 0; i < ul2.children.length; i++) {
                if (ul2.children[i].children[0].value.trim() === '') {
                    alert('请补全必填内容');
                    this.disabled = false;
                    clearBtn.disabled = false;
                    // chongzhi.disabled = false;
                    return;
                }
            }
            // 可能出现后添加的输入框和按钮，需要重新获取一下
            inputs2 = document.querySelectorAll('.xuan2 input');
            btns2 = document.querySelectorAll('.xuan2 button');
            // 让所有的 inputs 不可用
            for (let i = 0; i < inputs2.length; i++) {
                inputs2[i].disabled = true;
            }
            // 让所有的按钮不可用
            for (let i = 0; i < btns2.length; i++) {
                btns2[i].disabled = true;
            }

            // 随机索引
            let randomNum = getRandomNumber(0, ul2.children.length - 1);
            // 每 0.09 秒选出一个结果
            let smallTimer = setInterval(() => {
                // 随机数数组
                let temArr = randomNumberToArr(0, ul2.children.length - 1);
                // 随机索引
                randomNum = getRandomNumber(0, ul2.children.length - 1);
                // 对随机索引进行加工，更加随机
                randomNum = temArr[randomNum];
                // 让其它输入框不变色
                for (let i = 0; i < ul2.children.length; i++) {
                    ul2.children[i].children[0].style.backgroundColor = '';
                }
                let ssTimer = setTimeout(() => {
                    // 让当前输入框变色
                    ul2.children[randomNum].children[0].style.backgroundColor = '#800B3E';
                    clearTimeout(ssTimer);
                }, 100);
            }, 90);
            // 3 秒后选出最终结果
            let bigTimer = setTimeout(() => {
                clearInterval(smallTimer);
                // 让其它输入框不变色
                for (let i = 0; i < ul2.children.length; i++) {
                    ul2.children[i].children[0].style.backgroundColor = '';
                }

                // 将问题添加到数组
                let question = '********** ' + document.querySelector('.question2 input').value + ' **********';
                if (document.querySelector('.question2 input').value.trim() === '') {
                    question = '********** 命2未录入的问题 **********';
                }
                let index = questionArr.indexOf(question);
                // 如果没有就添加
                if (index < 0) {
                    questionArr.push(question);
                    localStorage.setItem('questionArr', JSON.stringify(questionArr));
                }
                // console.log('index:', index);
                // console.log(questionArr);

                // 将答案添加到 "天使建议您" 区域
                // 如果问题未出现过，就添加，否则，就在对应的问题下添加答案即可
                if (index < 0 || tianshi.innerHTML === '') {
                    // 创建 dl
                    let dl = document.createElement('dl');
                    // 创建 dt
                    let dt = document.createElement('dt');
                    dt.innerHTML = question;
                    // 创建 dd
                    let dd = document.createElement('dd');
                    dd.innerHTML = ul2.children[randomNum].children[0].value;
                    if (ul2.children[randomNum].children[0].value.trim() === '') {
                        dd.innerHTML = '未录入的答案';
                    }
                    dl.appendChild(dt);
                    dl.appendChild(dd);
                    tianshi.appendChild(dl);
                    // console.log(2);
                    localStorage.setItem('res', tianshi.innerHTML);
                } else {
                    // 创建 dd
                    let dd = document.createElement('dd');
                    dd.innerHTML = ul2.children[randomNum].children[0].value;
                    if (ul2.children[randomNum].children[0].value.trim() === '') {
                        dd.innerHTML = '未知答案';
                    }
                    tianshi.children[index].appendChild(dd);
                    // console.log(1);
                    localStorage.setItem('res', tianshi.innerHTML);
                }

                let ssTimer = setTimeout(() => {
                    // 让当前输入框变色
                    ul2.children[randomNum].children[0].style.backgroundColor = '#800B3E';
                    clearTimeout(ssTimer);
                }, 100);

                // 让所有的 inputs 可用
                for (let i = 0; i < inputs2.length; i++) {
                    inputs2[i].disabled = false;
                }
                // 让所有的按钮可用
                for (let i = 0; i < btns2.length; i++) {
                    btns2[i].disabled = false;
                }
                this.disabled = false;
                clearBtn.disabled = false;
                // chongzhi.disabled = false;
                clearTimeout(bigTimer);
            }, 2700);
        });


        /*
            点击 清空生成的结果 按钮，清空答案
        */

        clearBtn.addEventListener('click', function () {
            tianshi.innerHTML = '';
            // questionArr = [];
            localStorage.removeItem('questionArr');
            // questionArr2 = [];
            localStorage.removeItem('res');
        });
    </script>


    <!-- 增加 批量录入 功能 -->
    <script>
        /*
            1.点击 批量录入 按钮，显示对应的录入窗口
            2.窗口有3个按钮：追加录入、重新录入、关闭窗口
            追加录入：
                判断是否只有：空格、逗号、回车符、Tab符
                获取原始数组：1.通过页面 2.通过本地存储
                将录入内容转为数组，追加到原始数组
                    从 Excel 中复制过来的数据，分隔符为：回车符、Tab符
                    其它分隔符：逗号
                渲染页面，每个 input 框都有：回车事件、删除事件
                设置本地存储
            重新录入：
                判断是否只有：空格、逗号、回车符、Tab符
                将录入内容转为数组，替换原始数组
                    从 Excel 中复制过来的数据，分隔符为：回车符、Tab符
                    其它分隔符：逗号
                渲染页面，每个 input 框都有：回车事件、删除事件
                设置本地存储
            关闭窗口：关闭对应的录入窗口
        */
        // 获取 批量录入 按钮
        let piliangBtn1 = document.querySelector('.piliang-btn1');
        let piliangBtn2 = document.querySelector('.piliang-btn2');
        // 获取遮罩层
        let pageMask = document.querySelector('.page-mask');
        // 获取对应的录入窗口
        let inputBox1 = document.querySelector('.input-box');
        let inputBox2 = document.querySelector('.input-box2');
        // 点击批量录入按钮，显示对应的录入窗口
        piliangBtn1.addEventListener('click', function () {
            pageMask.style.display = 'block';
            inputBox1.style.display = 'block';
        });
        piliangBtn2.addEventListener('click', function () {
            pageMask.style.display = 'block';
            inputBox2.style.display = 'block';
        });

        // 追加录入按钮
        let inputBoxBtnAdd1 = document.querySelector('.input-box-btn-add');
        let inputBoxBtnAdd2 = document.querySelector('.input-box2-btn-add');
        // 重新录入按钮
        let inputBoxBtnReplace1 = document.querySelector('.input-box-btn-replace');
        let inputBoxBtnReplace2 = document.querySelector('.input-box2-btn-replace');


        // 批量录入中的文本域
        let inputBoxTextarea1 = document.querySelector('.input-box-textarea');
        let inputBoxTextarea2 = document.querySelector('.input-box2-textarea');

        // 进入页面从本地存储中加载保存的内容
        inputBoxTextarea1.value = localStorage.getItem('piliang-caogao1') || '';
        inputBoxTextarea2.value = localStorage.getItem('piliang-caogao2') || '';

        // 每 5 秒存储一次内容到本地存储
        setInterval(() => {
            localStorage.setItem('piliang-caogao1', inputBoxTextarea1.value);
            localStorage.setItem('piliang-caogao2', inputBoxTextarea2.value);
        }, 5000);

        // 追加录入
        inputBoxBtnAdd1.addEventListener('click', function () {
            // 文本域
            let tempInputContent = inputBoxTextarea1.value;
            if (tempInputContent.trim() === '') {
                alert('请输入内容');
                return;
            }

            // 获取原始数组：1.通过页面 2.通过本地存储
            let preArr = JSON.parse(localStorage.getItem('xuan1arr')) || [];
            // console.log(preArr);

            // 将录入内容转为数组，追加到原始数组
            // 从 Excel 中复制过来的数据，分隔符为：回车符、Tab符
            // 其它分隔符：逗号、空格
            let nowArr = tempInputContent.replace(/\s+|\n+|\t+|,|，|;|；|&/g, ',').split(',');
            // console.log(nowArr);

            // 遍历生成的数组，追加到原始数组
            // 开始元素和末尾元素都是 ''
            for (let i = 0; i < nowArr.length; i++) {
                if (nowArr[i].trim() !== '') {
                    preArr.push(nowArr[i].slice(0, 4));
                }
            }
            // console.log(preArr);

            // 渲染页面，每个 input 框都有：回车事件、删除事件
            ul.innerHTML = '';
            for (let i = 0; i < preArr.length; i++) {
                // 创建 li
                let li = document.createElement('li');
                // 创建 input
                let input = document.createElement('input');
                input.type = 'text';
                input.maxLength = '4';
                input.placeholder = '限4个字';
                input.value = preArr[i];
                // 新增的 input 都添加 blur 事件
                input.addEventListener('blur', function () {
                    // 每个 input 失去焦点时，重新更新数组
                    for (let i = 0; i < ul.children.length; i++) {
                        // if (ul2.children[i].children[0].value != '') {
                        xuan1arr[i] = ul.children[i].children[0].value;
                        // }
                    }
                    localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));
                });
                // 添加 input
                li.appendChild(input);
                // 添加 li
                ul.appendChild(li);
            }


            // 更新必填1中 input 的数量
            inputs = document.querySelectorAll('.xuan1 input');


            // 取消全部 input 的 回车事件
            for (let i = 0; i < ul.children.length; i++) {
                ul.children[i].children[0].removeEventListener('keydown', handle);
            }
            // 只给最后一个 input 添加 回车事件
            ul.children[ul.children.length - 1].children[0].addEventListener('keydown', handle);
            // console.log('添加后li数量', ul.children.length);

            // 获取删除按钮
            for (let i = 0; i < ul.children.length; i++) {
                ul.children[i].children[0].addEventListener('keydown', function (e) {
                    if (this.value === '') {
                        if (e.key === 'Delete' || e.key === 'Backspace') {
                            if (ul.children.length === 1) {
                                let tim = setTimeout(function () {
                                    ul.children[0].children[0].focus();
                                    clearTimeout(tim);
                                }, 0);
                                return;
                            }

                            // 删除父元素 li
                            this.parentNode.remove();
                            // console.log('删除后li数量', ul.children.length);

                            // 更新必填1中 input 的数量
                            inputs = document.querySelectorAll('.xuan1 input');
                            // 取消全部 input 的 回车事件
                            for (let i = 0; i < ul.children.length; i++) {
                                ul.children[i].children[0].removeEventListener('keydown', handle2);
                            }
                            // 只给最后一个 input 添加 回车事件
                            ul.children[ul.children.length - 1].children[0].addEventListener('keydown', handle2);

                            // 清空数组，重新添加
                            xuan1arr = [];
                            for (let i = 0; i < ul.children.length; i++) {
                                // if (ul2.children[i].children[0].value != '') {
                                xuan1arr[i] = ul.children[i].children[0].value;
                                // }
                            }

                            // 上下键功能
                            fangxiang(ul);

                            localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));
                        }
                    }
                });
            }



            // 上下键功能
            fangxiang(ul);


            // input 的 focus 事件
            // 主题1中所有 input 的 focus 事件 (部分情景下 blur 事件被占用)
            // input 每次获取焦点后，重新为主题1中所有的 input 添加键盘删除事件
            for (let i = 0; i < ul.children.length; i++) {
                ul.children[i].children[0].addEventListener('focus', function (e) {
                    for (let i = 0; i < ul.children.length; i++) {
                        ul.children[i].children[0].addEventListener('keydown', function (e) {

                            if (e.key === 'Delete' || e.key === 'Backspace') {
                                if (this.value === '') {
                                    if (ul.children.length === 1) {
                                        let tim = setTimeout(function () {
                                            ul.children[0].children[0].focus();
                                            clearTimeout(tim);
                                        }, 0);
                                        return;
                                    }

                                    // 删除父元素 li
                                    this.parentNode.remove();

                                    if (i > 0 && ul.children[i - 1]) {
                                        let t1 = setTimeout(() => {
                                            ul.children[i - 1].children[0].focus();
                                            clearTimeout(t1);
                                        }, 0);
                                    }


                                    if (i <= 0 || !ul.children[i - 1]) {
                                        let t2 = setTimeout(() => {
                                            ul.children[0].children[0].focus();
                                            clearTimeout(t2);
                                        }, 0);
                                    }

                                    // console.log('删除后li数量', ul.children.length);
                                    for (let i = 0; i < ul.children.length; i++) {
                                        ul.children[i].children[0].removeEventListener('keydown', handle);
                                    }
                                    ul.children[ul.children.length - 1].children[0].addEventListener('keydown', handle);

                                    xuan1arr = [];
                                    for (let i = 0; i < ul.children.length; i++) {
                                        // if (ul.children[i].children[0].value != '') {
                                        xuan1arr[i] = ul.children[i].children[0].value;
                                        // }
                                    }
                                    localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));

                                    // 上下键功能
                                    fangxiang(ul);
                                } else {
                                    let t3 = setTimeout(() => {
                                        this.value = '';
                                        clearTimeout(t3);
                                    }, 0);
                                }
                            }
                        });
                    }

                });
            }



            // 设置本地存储
            localStorage.setItem('xuan1arr', JSON.stringify(preArr));
            localStorage.setItem('piliang-caogao1', inputBoxTextarea1.value);
        });

        inputBoxBtnAdd2.addEventListener('click', function () {
            // 文本域
            let tempInputContent = inputBoxTextarea2.value;
            if (tempInputContent.trim() === '') {
                alert('请输入内容');
                return;
            }

            // 获取原始数组：1.通过页面 2.通过本地存储
            let preArr = JSON.parse(localStorage.getItem('xuan2arr')) || [];
            // console.log(preArr);

            // 将录入内容转为数组，追加到原始数组
            // 从 Excel 中复制过来的数据，分隔符为：回车符、Tab符
            // 其它分隔符：逗号、空格
            let nowArr = tempInputContent.replace(/\s+|\n+|\t+|,|，|;|；|&/g, ',').split(',');
            // console.log(nowArr);

            // 遍历生成的数组，追加到原始数组
            // 开始元素和末尾元素都是 ''
            for (let i = 0; i < nowArr.length; i++) {
                if (nowArr[i].trim() !== '') {
                    preArr.push(nowArr[i].slice(0, 4));
                }
            }
            // console.log(preArr);

            // 渲染页面，每个 input 框都有：回车事件、删除事件
            ul2.innerHTML = '';
            for (let i = 0; i < preArr.length; i++) {
                // 创建 li
                let li = document.createElement('li');
                // 创建 input
                let input = document.createElement('input');
                input.type = 'text';
                input.maxLength = '4';
                input.placeholder = '限4个字';
                input.value = preArr[i];
                // 新增的 input 都添加 blur 事件
                input.addEventListener('blur', function () {
                    // 每个 input 失去焦点时，重新更新数组
                    for (let i = 0; i < ul2.children.length; i++) {
                        // if (ul2.children[i].children[0].value != '') {
                        xuan2arr[i] = ul2.children[i].children[0].value;
                        // }
                    }
                    localStorage.setItem('xuan2arr', JSON.stringify(xuan2arr));
                });
                // 添加 input
                li.appendChild(input);
                // 添加 li
                ul2.appendChild(li);
            }


            // 更新必填2中 input 的数量
            inputs2 = document.querySelectorAll('.xuan2 input');


            // 取消全部 input 的 回车事件
            for (let i = 0; i < ul2.children.length; i++) {
                ul2.children[i].children[0].removeEventListener('keydown', handle2);
            }
            // 只给最后一个 input 添加 回车事件
            ul2.children[ul2.children.length - 1].children[0].addEventListener('keydown', handle2);
            // console.log('添加后li2数量', ul2.children.length);

            // 获取删除按钮
            for (let i = 0; i < ul2.children.length; i++) {
                ul2.children[i].children[0].addEventListener('keydown', function (e) {
                    if (this.value === '') {
                        if (e.key === 'Delete' || e.key === 'Backspace') {
                            if (ul2.children.length === 1) {
                                let tim = setTimeout(function () {
                                    ul2.children[0].children[0].focus();
                                    clearTimeout(tim);
                                }, 0);
                                return;
                            }

                            // 删除父元素 li
                            this.parentNode.remove();
                            // console.log('删除后li2数量', ul2.children.length);

                            // 更新必填2中 input 的数量
                            inputs2 = document.querySelectorAll('.xuan2 input');
                            // 取消全部 input 的 回车事件
                            for (let i = 0; i < ul2.children.length; i++) {
                                ul2.children[i].children[0].removeEventListener('keydown', handle2);
                            }
                            // 只给最后一个 input 添加 回车事件
                            ul2.children[ul2.children.length - 1].children[0].addEventListener('keydown', handle2);

                            // 清空数组，重新添加
                            xuan2arr = [];
                            for (let i = 0; i < ul2.children.length; i++) {
                                // if (ul2.children[i].children[0].value != '') {
                                xuan2arr[i] = ul2.children[i].children[0].value;
                                // }
                            }

                            // 上下键功能
                            fangxiang(ul2);

                            localStorage.setItem('xuan2arr', JSON.stringify(xuan2arr));
                        }
                    }
                });
            }


            // 上下键功能
            fangxiang(ul2);


            // input 的 focus 事件
            // 主题1中所有 input 的 focus 事件 (部分情景下 blur 事件被占用)
            // input 每次获取焦点后，重新为主题1中所有的 input 添加键盘删除事件
            for (let i = 0; i < ul2.children.length; i++) {
                ul2.children[i].children[0].addEventListener('focus', function (e) {
                    for (let i = 0; i < ul2.children.length; i++) {
                        ul2.children[i].children[0].addEventListener('keydown', function (e) {

                            if (e.key === 'Delete' || e.key === 'Backspace') {
                                if (this.value === '') {
                                    if (ul2.children.length === 1) {
                                        let tim = setTimeout(function () {
                                            ul2.children[0].children[0].focus();
                                            clearTimeout(tim);
                                        }, 0);
                                        return;
                                    }

                                    // 删除父元素 li
                                    this.parentNode.remove();

                                    if (i > 0 && ul2.children[i - 1]) {
                                        let t1 = setTimeout(() => {
                                            ul2.children[i - 1].children[0].focus();
                                            clearTimeout(t1);
                                        }, 0);
                                    }


                                    if (i <= 0 || !ul2.children[i - 1]) {
                                        let t2 = setTimeout(() => {
                                            ul2.children[0].children[0].focus();
                                            clearTimeout(t2);
                                        }, 0);
                                    }

                                    // console.log('删除后li2数量', ul2.children.length);
                                    for (let i = 0; i < ul2.children.length; i++) {
                                        ul2.children[i].children[0].removeEventListener('keydown', handle2);
                                    }
                                    ul2.children[ul2.children.length - 1].children[0].addEventListener('keydown', handle2);

                                    xuan2arr = [];
                                    for (let i = 0; i < ul2.children.length; i++) {
                                        // if (ul.children[i].children[0].value != '') {
                                        xuan2arr[i] = ul2.children[i].children[0].value;
                                        // }
                                    }
                                    localStorage.setItem('xuan2arr', JSON.stringify(xuan2arr));

                                    // 上下键功能
                                    fangxiang(ul2);
                                } else {
                                    let t3 = setTimeout(() => {
                                        this.value = '';
                                        clearTimeout(t3);
                                    }, 0);
                                }
                            }
                        });
                    }

                });
            }




            // 设置本地存储
            localStorage.setItem('xuan2arr', JSON.stringify(preArr));
            localStorage.setItem('piliang-caogao2', inputBoxTextarea2.value);
        });


        // 重新录入
        inputBoxBtnReplace1.addEventListener('click', function () {

            // 文本域
            let tempInputContent = inputBoxTextarea1.value;
            if (tempInputContent.trim() === '') {
                alert('请输入内容');
                return;
            }

            localStorage.removeItem('xuan1arr');

            // 将录入内容转为数组，替换原始数组
            // 从 Excel 中复制过来的数据，分隔符为：回车符、Tab符
            // 其它分隔符：逗号、空格
            let nowArr = tempInputContent.replace(/\s+|\n+|\t+|,|，|;|；|&/g, ',').split(',');
            for (let i = 0; i < nowArr.length; i++) {
                nowArr[i] = nowArr[i].slice(0, 4);
            }
            nowArr = nowArr.filter((value, index) => {
                return value.trim() != '';
            });
            // console.log(nowArr);


            // 遍历生成的数组，替换原始数组
            // 渲染页面，每个 input 框都有：回车事件、删除事件
            ul.innerHTML = '';
            for (let i = 0; i < nowArr.length; i++) {
                if (nowArr[i].trim() !== '') {
                    // 创建 li
                    let li = document.createElement('li');
                    // 创建 input
                    let input = document.createElement('input');
                    input.type = 'text';
                    input.maxLength = '4';
                    input.placeholder = '限4个字';
                    input.value = nowArr[i];
                    // 新增的 input 都添加 blur 事件
                    input.addEventListener('blur', function () {
                        // 每个 input 失去焦点时，重新更新数组
                        for (let i = 0; i < ul.children.length; i++) {
                            // if (ul2.children[i].children[0].value != '') {
                            xuan1arr[i] = ul.children[i].children[0].value;
                            // }
                        }
                        localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));
                    });
                    // 添加 input
                    li.appendChild(input);
                    // 添加 li
                    ul.appendChild(li);
                }
            }


            // 更新必填1中 input 的数量
            inputs = document.querySelectorAll('.xuan1 input');


            // 取消全部 input 的 回车事件
            for (let i = 0; i < ul.children.length; i++) {
                ul.children[i].children[0].removeEventListener('keydown', handle);
            }
            // 只给最后一个 input 添加 回车事件
            ul.children[ul.children.length - 1].children[0].addEventListener('keydown', handle);
            // console.log('添加后li数量', ul.children.length);

            // 获取删除按钮
            for (let i = 0; i < ul.children.length; i++) {
                ul.children[i].children[0].addEventListener('keydown', function (e) {
                    if (this.value === '') {
                        if (e.key === 'Delete' || e.key === 'Backspace') {
                            if (ul.children.length === 1) {
                                let tim = setTimeout(function () {
                                    ul.children[0].children[0].focus();
                                    clearTimeout(tim);
                                }, 0);
                                return;
                            }

                            // 删除父元素 li
                            this.parentNode.remove();
                            // console.log('删除后li数量', ul.children.length);

                            // 更新必填1中 input 的数量
                            inputs = document.querySelectorAll('.xuan1 input');
                            // 取消全部 input 的 回车事件
                            for (let i = 0; i < ul.children.length; i++) {
                                ul.children[i].children[0].removeEventListener('keydown', handle);
                            }
                            // 只给最后一个 input 添加 回车事件
                            ul.children[ul.children.length - 1].children[0].addEventListener('keydown', handle);

                            // 清空数组，重新添加
                            xuan1arr = [];
                            for (let i = 0; i < ul.children.length; i++) {
                                // if (ul2.children[i].children[0].value != '') {
                                xuan1arr[i] = ul.children[i].children[0].value;
                                // }
                            }

                            // 上下键功能
                            fangxiang(ul);

                            localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));
                        }
                    }
                });
            }


            // 上下键功能
            fangxiang(ul);


            // input 的 focus 事件
            // 主题1中所有 input 的 focus 事件 (部分情景下 blur 事件被占用)
            // input 每次获取焦点后，重新为主题1中所有的 input 添加键盘删除事件
            for (let i = 0; i < ul.children.length; i++) {
                ul.children[i].children[0].addEventListener('focus', function (e) {
                    for (let i = 0; i < ul.children.length; i++) {
                        ul.children[i].children[0].addEventListener('keydown', function (e) {

                            if (e.key === 'Delete' || e.key === 'Backspace') {
                                if (this.value === '') {
                                    if (ul.children.length === 1) {
                                        let tim = setTimeout(function () {
                                            ul.children[0].children[0].focus();
                                            clearTimeout(tim);
                                        }, 0);
                                        return;
                                    }

                                    // 删除父元素 li
                                    this.parentNode.remove();

                                    if (i > 0 && ul.children[i - 1]) {
                                        let t1 = setTimeout(() => {
                                            ul.children[i - 1].children[0].focus();
                                            clearTimeout(t1);
                                        }, 0);
                                    }


                                    if (i <= 0 || !ul.children[i - 1]) {
                                        let t2 = setTimeout(() => {
                                            ul.children[0].children[0].focus();
                                            clearTimeout(t2);
                                        }, 0);
                                    }

                                    // console.log('删除后li数量', ul.children.length);
                                    for (let i = 0; i < ul.children.length; i++) {
                                        ul.children[i].children[0].removeEventListener('keydown', handle);
                                    }
                                    ul.children[ul.children.length - 1].children[0].addEventListener('keydown', handle);

                                    xuan1arr = [];
                                    for (let i = 0; i < ul.children.length; i++) {
                                        // if (ul.children[i].children[0].value != '') {
                                        xuan1arr[i] = ul.children[i].children[0].value;
                                        // }
                                    }
                                    localStorage.setItem('xuan1arr', JSON.stringify(xuan1arr));

                                    // 上下键功能
                                    fangxiang(ul);
                                } else {
                                    let t3 = setTimeout(() => {
                                        this.value = '';
                                        clearTimeout(t3);
                                    }, 0);
                                }
                            }
                        });
                    }

                });
            }



            // 设置本地存储
            localStorage.setItem('xuan1arr', JSON.stringify(nowArr));
            localStorage.setItem('piliang-caogao1', inputBoxTextarea1.value);
        });

        // console.log('3 ,3， 5 ;6 &4 ；3'.replace(/\s+|\n+|\t+|,|，|;|；|&/g, ',').split(','));

        inputBoxBtnReplace2.addEventListener('click', function () {

            // 文本域
            let tempInputContent = inputBoxTextarea2.value;
            if (tempInputContent.trim() === '') {
                alert('请输入内容');
                return;
            }

            localStorage.removeItem('xuan2arr');

            // 将录入内容转为数组，替换原始数组
            // 从 Excel 中复制过来的数据，分隔符为：回车符、Tab符
            // 其它分隔符：逗号、空格
            let nowArr = tempInputContent.replace(/\s+|\n+|\t+|,|，|;|；|&/g, ',').split(',');
            for (let i = 0; i < nowArr.length; i++) {
                nowArr[i] = nowArr[i].slice(0, 4);
            }

            nowArr = nowArr.filter((value, index) => {
                return value.trim() != '';
            });


            // console.log(nowArr);

            // 遍历生成的数组，替换原始数组
            // 渲染页面，每个 input 框都有：回车事件、删除事件
            ul2.innerHTML = '';
            for (let i = 0; i < nowArr.length; i++) {
                if (nowArr[i].trim() !== '') {
                    // 创建 li
                    let li = document.createElement('li');
                    // 创建 input
                    let input = document.createElement('input');
                    input.type = 'text';
                    input.maxLength = '4';
                    input.placeholder = '限4个字';
                    input.value = nowArr[i];
                    // 新增的 input 都添加 blur 事件
                    input.addEventListener('blur', function () {
                        // 每个 input 失去焦点时，重新更新数组
                        for (let i = 0; i < ul2.children.length; i++) {
                            // if (ul2.children[i].children[0].value != '') {
                            xuan2arr[i] = ul2.children[i].children[0].value;
                            // }
                        }
                        localStorage.setItem('xuan2arr', JSON.stringify(xuan2arr));
                    });
                    // 添加 input
                    li.appendChild(input);
                    // 添加 li
                    ul2.appendChild(li);
                }
            }


            // 更新必填1中 input 的数量
            inputs = document.querySelectorAll('.xuan2 input');


            // 取消全部 input 的 回车事件
            for (let i = 0; i < ul2.children.length; i++) {
                ul2.children[i].children[0].removeEventListener('keydown', handle2);
            }
            // 只给最后一个 input 添加 回车事件
            ul2.children[ul2.children.length - 1].children[0].addEventListener('keydown', handle2);
            // console.log('添加后li2数量', ul2.children.length);

            // 获取删除按钮
            for (let i = 0; i < ul2.children.length; i++) {
                ul2.children[i].children[0].addEventListener('keydown', function (e) {
                    if (this.value === '') {
                        if (e.key === 'Delete' || e.key === 'Backspace') {
                            if (ul2.children.length === 1) {
                                let tim = setTimeout(function () {
                                    ul2.children[0].children[0].focus();
                                    clearTimeout(tim);
                                }, 0);
                                return;
                            }

                            // 删除父元素 li
                            this.parentNode.remove();
                            // console.log('删除后li2数量', ul2.children.length);

                            // 更新必填1中 input 的数量
                            inputs = document.querySelectorAll('.xuan2 input');
                            // 取消全部 input 的 回车事件
                            for (let i = 0; i < ul2.children.length; i++) {
                                ul2.children[i].children[0].removeEventListener('keydown', handle2);
                            }
                            // 只给最后一个 input 添加 回车事件
                            ul2.children[ul2.children.length - 1].children[0].addEventListener('keydown', handle2);

                            // 清空数组，重新添加
                            xuan2arr = [];
                            for (let i = 0; i < ul2.children.length; i++) {
                                // if (ul2.children[i].children[0].value != '') {
                                xuan2arr[i] = ul2.children[i].children[0].value;
                                // }
                            }

                            // 上下键功能
                            fangxiang(ul2);

                            localStorage.setItem('xuan2arr', JSON.stringify(xuan2arr));
                        }
                    }
                });
            }

            // 上下键功能
            fangxiang(ul2);


            // input 的 focus 事件
            // 主题1中所有 input 的 focus 事件 (部分情景下 blur 事件被占用)
            // input 每次获取焦点后，重新为主题1中所有的 input 添加键盘删除事件
            for (let i = 0; i < ul2.children.length; i++) {
                ul2.children[i].children[0].addEventListener('focus', function (e) {
                    for (let i = 0; i < ul2.children.length; i++) {
                        ul2.children[i].children[0].addEventListener('keydown', function (e) {

                            if (e.key === 'Delete' || e.key === 'Backspace') {
                                if (this.value === '') {
                                    if (ul2.children.length === 1) {
                                        let tim = setTimeout(function () {
                                            ul2.children[0].children[0].focus();
                                            clearTimeout(tim);
                                        }, 0);
                                        return;
                                    }

                                    // 删除父元素 li
                                    this.parentNode.remove();

                                    if (i > 0 && ul2.children[i - 1]) {
                                        let t1 = setTimeout(() => {
                                            ul2.children[i - 1].children[0].focus();
                                            clearTimeout(t1);
                                        }, 0);
                                    }


                                    if (i <= 0 || !ul2.children[i - 1]) {
                                        let t2 = setTimeout(() => {
                                            ul2.children[0].children[0].focus();
                                            clearTimeout(t2);
                                        }, 0);
                                    }

                                    // console.log('删除后li2数量', ul2.children.length);
                                    for (let i = 0; i < ul2.children.length; i++) {
                                        ul2.children[i].children[0].removeEventListener('keydown', handle2);
                                    }
                                    ul2.children[ul2.children.length - 1].children[0].addEventListener('keydown', handle2);

                                    xuan2arr = [];
                                    for (let i = 0; i < ul2.children.length; i++) {
                                        // if (ul.children[i].children[0].value != '') {
                                        xuan2arr[i] = ul2.children[i].children[0].value;
                                        // }
                                    }
                                    localStorage.setItem('xuan2arr', JSON.stringify(xuan2arr));

                                    // 上下键功能
                                    fangxiang(ul2);
                                } else {
                                    let t3 = setTimeout(() => {
                                        this.value = '';
                                        clearTimeout(t3);
                                    }, 0);
                                }
                            }
                        });
                    }

                });
            }




            // 设置本地存储
            localStorage.setItem('xuan2arr', JSON.stringify(nowArr));
            localStorage.setItem('piliang-caogao2', inputBoxTextarea2.value);
        });


        // 清空内容
        let inputBoxBtnClear1 = document.querySelector('.input-box-btn-clear');
        let inputBoxBtnClear2 = document.querySelector('.input-box2-btn-clear');
        // 点击按钮情况窗口中的内容和本地存储中的内容
        inputBoxBtnClear1.addEventListener('click', function () {
            inputBoxTextarea1.value = '';
            localStorage.removeItem('piliang-caogao1');
        });
        inputBoxBtnClear2.addEventListener('click', function () {
            inputBoxTextarea2.value = '';
            localStorage.removeItem('piliang-caogao2');
        });

        // 关闭窗口按钮
        let inputBoxBtnClose1 = document.querySelector('.input-box-btn-close');
        let inputBoxBtnClose2 = document.querySelector('.input-box2-btn-close');
        // 点击关闭窗口按钮，关闭窗口
        inputBoxBtnClose1.addEventListener('click', function () {
            pageMask.style.display = 'none';
            inputBox1.style.display = 'none';
            localStorage.setItem('piliang-caogao1', inputBoxTextarea1.value);
        });
        inputBoxBtnClose2.addEventListener('click', function () {
            pageMask.style.display = 'none';
            inputBox2.style.display = 'none';
            localStorage.setItem('piliang-caogao2', inputBoxTextarea2.value);
        });


        // 提取按钮
        let tiquBtn1 = document.querySelector('.tiqu-btn1');
        let tiquBtn2 = document.querySelector('.tiqu-btn2');
        // 收集内容的盒子
        let tiquBox1 = document.querySelector('.tiqu-box1');
        let tiquBox2 = document.querySelector('.tiqu-box2');
        // 文本域
        let tiquText1 = document.querySelector('.tiqu-box1-textarea');
        let tiquText2 = document.querySelector('.tiqu-box2-textarea');
        // 关闭按钮
        let tiquClose1 = document.querySelector('.tiqu-box1-btn-close');
        let tiquClose2 = document.querySelector('.tiqu-box2-btn-close');

        // 所有提取的内容
        // let tiquArr1 = JSON.parse(localStorage.getItem('tiquArr1')) || [];
        // let tiquArr2 = JSON.parse(localStorage.getItem('tiquArr2')) || [];
        let tiquStr1 = localStorage.getItem('tiquStr1') || '';
        let tiquStr2 = localStorage.getItem('tiquStr2') || '';
        // 提取次数
        let tiquNum1 = localStorage.getItem('tiquNum1') || 0;
        let tiquNum2 = localStorage.getItem('tiquNum2') || 0;


        // 点击提取按钮，显示窗口，将内容展示
        tiquBtn1.addEventListener('click', function () {
            // tiquArr1 = JSON.parse(localStorage.getItem('tiquArr1')) || [];
            tiquStr1 = localStorage.getItem('tiquStr1') || '';

            pageMask.style.display = 'block';
            tiquBox1.style.display = 'block';
            if (ul.children.length <= 1 && ul.children[0].children[0].value.trim() === '') {
                return;
            }
            // let arr = [];
            tiquNum1 = localStorage.getItem('tiquNum1') || 0;
            tiquNum1++;

            // tiquArr1.push('第' + tiquNum1 + '次提取：\n');
            // for (let i = 0; i < ul.children.length; i++) {
            //     tiquArr1.push(ul.children[i].children[0].value);
            // }
            // tiquArr1.push('\n\n');
            // let str = tiquArr1.join(' ');
            // tiquText1.value = str;

            tiquStr1 += '第' + tiquNum1 + '次提取：[' + year + '-' + month + '-' + day + ' ' + hours + ':' + minutes + ':' + seconds + ']' + '\n';
            for (let i = 0; i < ul.children.length; i++) {
                tiquStr1 += ul.children[i].children[0].value + ' ';
            }
            tiquStr1 += '\n\n';
            tiquText1.value = tiquStr1;


            localStorage.setItem('tiquNum1', tiquNum1);
            // localStorage.setItem('tiquArr1', JSON.stringify(tiquArr1));
            localStorage.setItem('tiquStr1', tiquStr1);
        });
        tiquBtn2.addEventListener('click', function () {
            // tiquArr2 = JSON.parse(localStorage.getItem('tiquArr2')) || [];
            tiquStr2 = localStorage.getItem('tiquStr2') || '';

            pageMask.style.display = 'block';
            tiquBox2.style.display = 'block';
            if (ul2.children.length <= 1 && ul2.children[0].children[0].value.trim() === '') {
                return;
            }
            // let arr = [];
            tiquNum2 = localStorage.getItem('tiquNum2') || 0;
            tiquNum2++;

            // tiquArr2.push('第' + tiquNum2 + '次提取：\n');
            // for (let i = 0; i < ul2.children.length; i++) {
            //     tiquArr2.push(ul2.children[i].children[0].value);
            // }
            // tiquArr2.push('\n\n');
            // let str = tiquArr2.join(' ');
            // tiquText2.value = str;

            tiquStr2 += '第' + tiquNum2 + '次提取：[' + year + '-' + month + '-' + day + ' ' + hours + ':' + minutes + ':' + seconds + ']' + '\n';
            for (let i = 0; i < ul2.children.length; i++) {
                tiquStr2 += ul2.children[i].children[0].value + ' ';
            }
            tiquStr2 += '\n\n';
            tiquText2.value = tiquStr2;

            localStorage.setItem('tiquNum2', tiquNum2);
            // localStorage.setItem('tiquArr2', JSON.stringify(tiquArr2));
            localStorage.setItem('tiquStr2', tiquStr2);
        });


        // 初始化
        tiquText1.value = localStorage.getItem('tiqu1') || '';
        tiquText2.value = localStorage.getItem('tiqu2') || '';


        // 清空按钮
        let tiquClear1 = document.querySelector('.tiqu-box1-btn-clear');
        let tiquClear2 = document.querySelector('.tiqu-box2-btn-clear');
        // 点击清空按钮
        // 文本域为空，清除提取次数、清除存储数组、清除草稿
        tiquClear1.addEventListener('click', function () {
            tiquText1.value = '';
            localStorage.removeItem('tiquNum1');
            // localStorage.removeItem('tiquArr1');
            localStorage.removeItem('tiquStr1');
            localStorage.removeItem('tiqu1');
        });
        tiquClear2.addEventListener('click', function () {
            tiquText2.value = '';
            localStorage.removeItem('tiquNum2');
            // localStorage.removeItem('tiquArr2');
            localStorage.removeItem('tiquStr2');
            localStorage.removeItem('tiqu2');
        });


        // 点击关闭窗口按钮，关闭窗口
        tiquClose1.addEventListener('click', function () {
            pageMask.style.display = 'none';
            tiquBox1.style.display = 'none';
            localStorage.setItem('tiqu1', tiquText1.value);
        });
        tiquClose2.addEventListener('click', function () {
            pageMask.style.display = 'none';
            tiquBox2.style.display = 'none';
            localStorage.setItem('tiqu2', tiquText2.value);
        });

    </script>
</body>

</html>
